import{p as mt,i as In,d as rr}from"./z24-ico4.js";import{s as ht,t as ar,C as Oe,k as or,u as ir,v as An,V as q,i as Qe,w as sr,U as Ft,x as lr,R as ur,y as Rn,z as Je,J as Nn,K as Be,O as cr,Q as fr,h as pe,X as Dn,Y as Lt,Z as Le,_ as pr,a as Fe,B as hr,P as Ce,$ as dr,a0 as mr,N as gr,a1 as Xe,a2 as Mt,a3 as On,a4 as Ut,a5 as it,a6 as vr,S as kt,M as yr,a7 as Jt,a8 as qe,a9 as $e,aa as _t,j as br,ab as xr,ac as wr,W as Mr,ad as _r,ae as Tr,af as Er,ag as Ir,ah as De,ai as Ue,aj as Ar,ak as Qt,al as en,am as Rr,an as Nr,ao as Dr,ap as Or,aq as Pr,ar as Sr,as as Ur,at as Pn}from"./C__p7v9B.js";import{D as et,E as Vt,G as gt,c as Ie,H as Ve,o as we,I as Sn,p as $,J as Un,K as kr,r as Ee,l as ke,L as Br,M as Yt,N as kn,q as dt,A as Bn,a as Gt,O as Cn,P as Pe,b as st,Q as Cr,R as jr,U as zr,w as Fr,d as Lr}from"./BQfswLsD.js";var Vr=Object.defineProperty,Yr=(r,e,n)=>e in r?Vr(r,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[e]=n,Gr=(r,e,n)=>Yr(r,e+"",n);function Hr(r){return jr()?(zr(r),!0):!1}function jn(r){return typeof r=="function"?r():$(r)}const Kr=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const Zr=Object.prototype.toString,qr=r=>Zr.call(r)==="[object Object]",$r=()=>{},Wr=Kr?window:void 0;function Xr(r){var e;const n=jn(r);return(e=n?.$el)!=null?e:n}function Tt(...r){let e,n,t,i;if(typeof r[0]=="string"||Array.isArray(r[0])?([n,t,i]=r,e=Wr):[e,n,t,i]=r,!e)return $r;Array.isArray(n)||(n=[n]),Array.isArray(t)||(t=[t]);const u=[],d=()=>{u.forEach(E=>E()),u.length=0},p=(E,D,S,R)=>(E.addEventListener(D,S,R),()=>E.removeEventListener(D,S,R)),w=Ve(()=>[Xr(e),jn(i)],([E,D])=>{if(d(),!E)return;const S=qr(D)?{...D}:D;u.push(...n.flatMap(R=>t.map(b=>p(E,R,b,S))))},{immediate:!0,flush:"post"}),_=()=>{w(),d()};return Hr(_),_}function zn(r,e,n,t){const i=class extends Qe{constructor(u={}){const d=Object.entries(r);super({uniforms:d.reduce((p,[w,_])=>{const E=Ft.clone({[w]:{value:_}});return{...p,...E}},{}),vertexShader:e,fragmentShader:n}),Gr(this,"key",""),d.forEach(([p])=>Object.defineProperty(this,p,{get:()=>this.uniforms[p].value,set:w=>this.uniforms[p].value=w})),Object.assign(this,u)}};return i.key=Le.generateUUID(),i}zn({color:new Oe("white"),scale:new pe(1,1),imageBounds:new pe(1,1),resolution:1024,map:null,zoom:1,radius:0,grayscale:0,opacity:1},`
    varying vec2 vUv;
    varying vec2 vPos;
    void main() {
      gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(position, 1.);
      vUv = uv;
      vPos = position.xy;
    }
  `,`
    // mostly from https://gist.github.com/statico/df64c5d167362ecf7b34fca0b1459a44
    varying vec2 vUv;
    varying vec2 vPos;
    uniform vec2 scale;
    uniform vec2 imageBounds;
    uniform float resolution;
    uniform vec3 color;
    uniform sampler2D map;
    uniform float radius;
    uniform float zoom;
    uniform float grayscale;
    uniform float opacity;
    const vec3 luma = vec3(.299, 0.587, 0.114);
    vec4 toGrayscale(vec4 color, float intensity) {
      return vec4(mix(color.rgb, vec3(dot(color.rgb, luma)), intensity), color.a);
    }
    vec2 aspect(vec2 size) {
      return size / min(size.x, size.y);
    }
    
    const float PI = 3.14159265;
      
    // from https://iquilezles.org/articles/distfunctions
    float udRoundBox( vec2 p, vec2 b, float r ) {
      return length(max(abs(p)-b+r,0.0))-r;
    }
  
    void main() {
      vec2 s = aspect(scale);
      vec2 i = aspect(imageBounds);
      float rs = s.x / s.y;
      float ri = i.x / i.y;
      vec2 new = rs < ri ? vec2(i.x * s.y / i.y, s.y) : vec2(s.x, i.y * s.x / i.x);
      vec2 offset = (rs < ri ? vec2((new.x - s.x) / 2.0, 0.0) : vec2(0.0, (new.y - s.y) / 2.0)) / new;
      vec2 uv = vUv * s / new + offset;
      vec2 zUv = (uv - vec2(0.5, 0.5)) / zoom + vec2(0.5, 0.5);
  
      vec2 res = vec2(scale * resolution);
      vec2 halfRes = 0.5 * res;
      float b = udRoundBox(vUv.xy * res - halfRes, halfRes, resolution * radius);    
        vec3 a = mix(vec3(1.0,0.0,0.0), vec3(0.0,0.0,0.0), smoothstep(0.0, 1.0, b));
      gl_FragColor = toGrayscale(texture2D(map, zUv) * vec4(color, opacity * a), grayscale);
      
      #include <tonemapping_fragment>
      #include <colorspace_fragment>
    }
  `);const Ht=parseInt(pr.replace(/\D+/g,""));var Jr=Object.defineProperty,Qr=(r,e,n)=>e in r?Jr(r,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[e]=n,ea=(r,e,n)=>(Qr(r,e+"",n),n);async function tn(r){const e=await r.arrayBuffer(),n=btoa(String.fromCharCode(...new Uint8Array(e)));return`data:${r.type||""};base64,${n}`}let lt,Et,je,ut;function It(r,e=1/0,n=null){Et||(Et=new Dn(2,2,1,1)),je||(je=new Qe({uniforms:{blitTexture:new wr(r)},vertexShader:`
        varying vec2 vUv;
        void main(){
            vUv = uv;
            gl_Position = vec4(position.xy * 1.0,0.,.999999);
        }
      `,fragmentShader:`
          uniform sampler2D blitTexture; 
          varying vec2 vUv;

          void main(){ 
              gl_FragColor = vec4(vUv.xy, 0, 1);
              
              #ifdef IS_SRGB
              gl_FragColor = LinearTosRGB( texture2D( blitTexture, vUv) );
              #else
              gl_FragColor = texture2D( blitTexture, vUv);
              #endif
          }
      `})),je.uniforms.blitTexture.value=r,je.defines.IS_SRGB="colorSpace"in r?r.colorSpace==="srgb":r.encoding===3001,je.needsUpdate=!0,ut||(ut=new Fe(Et,je),ut.frustrumCulled=!1);const t=new Ce,i=new kt;i.add(ut),n||(n=lt=new Mr({antialias:!1})),n.setSize(Math.min(r.image.width,e),Math.min(r.image.height,e)),n.clear(),n.render(i,t);const u=new On(n.domElement);return u.minFilter=r.minFilter,u.magFilter=r.magFilter,u.wrapS=r.wrapS,u.wrapT=r.wrapT,u.name=r.name,lt&&(lt.dispose(),lt=null),u}const nn={POSITION:["byte","byte normalized","unsigned byte","unsigned byte normalized","short","short normalized","unsigned short","unsigned short normalized"],NORMAL:["byte normalized","short normalized"],TANGENT:["byte normalized","short normalized"],TEXCOORD:["byte","byte normalized","unsigned byte","short","short normalized","unsigned short"]};class Fn{constructor(){this.pluginCallbacks=[],this.register(function(e){return new ca(e)}),this.register(function(e){return new fa(e)}),this.register(function(e){return new da(e)}),this.register(function(e){return new ma(e)}),this.register(function(e){return new ga(e)}),this.register(function(e){return new va(e)}),this.register(function(e){return new pa(e)}),this.register(function(e){return new ha(e)}),this.register(function(e){return new ya(e)}),this.register(function(e){return new ba(e)}),this.register(function(e){return new xa(e)})}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,n,t,i){const u=new ua,d=[];for(let p=0,w=this.pluginCallbacks.length;p<w;p++)d.push(this.pluginCallbacks[p](u));u.setPlugins(d),u.write(e,n,i).catch(t)}parseAsync(e,n){const t=this;return new Promise(function(i,u){t.parse(e,i,u,n)})}}ea(Fn,"Utils",{insertKeyframe:function(r,e){const n=r.getValueSize(),t=new r.TimeBufferType(r.times.length+1),i=new r.ValueBufferType(r.values.length+n),u=r.createInterpolant(new r.ValueBufferType(n));let d;if(r.times.length===0){t[0]=e;for(let p=0;p<n;p++)i[p]=0;d=0}else if(e<r.times[0]){if(Math.abs(r.times[0]-e)<.001)return 0;t[0]=e,t.set(r.times,1),i.set(u.evaluate(e),0),i.set(r.values,n),d=0}else if(e>r.times[r.times.length-1]){if(Math.abs(r.times[r.times.length-1]-e)<.001)return r.times.length-1;t[t.length-1]=e,t.set(r.times,0),i.set(r.values,0),i.set(u.evaluate(e),r.values.length),d=t.length-1}else for(let p=0;p<r.times.length;p++){if(Math.abs(r.times[p]-e)<.001)return p;if(r.times[p]<e&&r.times[p+1]>e){t.set(r.times.slice(0,p+1),0),t[p+1]=e,t.set(r.times.slice(p+1),p+2),i.set(r.values.slice(0,(p+1)*n),0),i.set(u.evaluate(e),(p+1)*n),i.set(r.values.slice((p+1)*n),(p+2)*n),d=p+1;break}}return r.times=t,r.values=i,d},mergeMorphTargetTracks:function(r,e){const n=[],t={},i=r.tracks;for(let u=0;u<i.length;++u){let d=i[u];const p=ht.parseTrackName(d.name),w=ht.findNode(e,p.nodeName);if(p.propertyName!=="morphTargetInfluences"||p.propertyIndex===void 0){n.push(d);continue}if(d.createInterpolant!==d.InterpolantFactoryMethodDiscrete&&d.createInterpolant!==d.InterpolantFactoryMethodLinear){if(d.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline)throw new Error("THREE.GLTFExporter: Cannot merge tracks with glTF CUBICSPLINE interpolation.");console.warn("THREE.GLTFExporter: Morph target interpolation mode not yet supported. Using LINEAR instead."),d=d.clone(),d.setInterpolation(ar)}const _=w.morphTargetInfluences.length,E=w.morphTargetDictionary[p.propertyIndex];if(E===void 0)throw new Error("THREE.GLTFExporter: Morph target name not found: "+p.propertyIndex);let D;if(t[w.uuid]===void 0){D=d.clone();const R=new D.ValueBufferType(_*D.times.length);for(let b=0;b<D.times.length;b++)R[b*_+E]=D.values[b];D.name=(p.nodeName||"")+".morphTargetInfluences",D.values=R,t[w.uuid]=D,n.push(D);continue}const S=d.createInterpolant(new d.ValueBufferType(1));D=t[w.uuid];for(let R=0;R<D.times.length;R++)D.values[R*_+E]=S.evaluate(D.times[R]);for(let R=0;R<d.times.length;R++){const b=this.insertKeyframe(D,d.times[R]);D.values[b*_+E]=d.values[R]}}return r.tracks=n,r}});const X={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987,CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,REPEAT:10497},At="KHR_mesh_quantization",ye={};ye[qe]=X.NEAREST;ye[Rr]=X.NEAREST_MIPMAP_NEAREST;ye[Nr]=X.NEAREST_MIPMAP_LINEAR;ye[Dr]=X.LINEAR;ye[Or]=X.LINEAR_MIPMAP_NEAREST;ye[Pr]=X.LINEAR_MIPMAP_LINEAR;ye[$e]=X.CLAMP_TO_EDGE;ye[Sr]=X.REPEAT;ye[Ur]=X.MIRRORED_REPEAT;const rn={scale:"scale",position:"translation",quaternion:"rotation",morphTargetInfluences:"weights"},ta=new Oe,an=12,na=1179937895,ra=2,on=8,aa=1313821514,oa=5130562;function We(r,e){return r.length===e.length&&r.every(function(n,t){return n===e[t]})}function ia(r){return new TextEncoder().encode(r).buffer}function sa(r){return We(r.elements,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}function la(r,e,n){const t={min:new Array(r.itemSize).fill(Number.POSITIVE_INFINITY),max:new Array(r.itemSize).fill(Number.NEGATIVE_INFINITY)};for(let i=e;i<e+n;i++)for(let u=0;u<r.itemSize;u++){let d;r.itemSize>4?d=r.array[i*r.itemSize+u]:(u===0?d=r.getX(i):u===1?d=r.getY(i):u===2?d=r.getZ(i):u===3&&(d=r.getW(i)),r.normalized===!0&&(d=Le.normalize(d,r.array))),t.min[u]=Math.min(t.min[u],d),t.max[u]=Math.max(t.max[u],d)}return t}function Ln(r){return Math.ceil(r/4)*4}function Rt(r,e=0){const n=Ln(r.byteLength);if(n!==r.byteLength){const t=new Uint8Array(n);if(t.set(new Uint8Array(r)),e!==0)for(let i=r.byteLength;i<n;i++)t[i]=e;return t.buffer}return r}function sn(){return typeof document>"u"&&typeof OffscreenCanvas<"u"?new OffscreenCanvas(1,1):document.createElement("canvas")}function ln(r,e){if(r.toBlob!==void 0)return new Promise(t=>r.toBlob(t,e));let n;return e==="image/jpeg"?n=.92:e==="image/webp"&&(n=.8),r.convertToBlob({type:e,quality:n})}class ua{constructor(){this.plugins=[],this.options={},this.pending=[],this.buffers=[],this.byteOffset=0,this.buffers=[],this.nodeMap=new Map,this.skins=[],this.extensionsUsed={},this.extensionsRequired={},this.uids=new Map,this.uid=0,this.json={asset:{version:"2.0",generator:"THREE.GLTFExporter"}},this.cache={meshes:new Map,attributes:new Map,attributesNormalized:new Map,materials:new Map,textures:new Map,images:new Map}}setPlugins(e){this.plugins=e}async write(e,n,t={}){this.options=Object.assign({binary:!1,trs:!1,onlyVisible:!0,maxTextureSize:1/0,animations:[],includeCustomExtensions:!1},t),this.options.animations.length>0&&(this.options.trs=!0),this.processInput(e),await Promise.all(this.pending);const i=this,u=i.buffers,d=i.json;t=i.options;const p=i.extensionsUsed,w=i.extensionsRequired,_=new Blob(u,{type:"application/octet-stream"}),E=Object.keys(p),D=Object.keys(w);E.length>0&&(d.extensionsUsed=E),D.length>0&&(d.extensionsRequired=D),d.buffers&&d.buffers.length>0&&(d.buffers[0].byteLength=_.size),t.binary===!0?_.arrayBuffer().then(S=>{const R=Rt(S),b=new DataView(new ArrayBuffer(on));b.setUint32(0,R.byteLength,!0),b.setUint32(4,oa,!0);const T=Rt(ia(JSON.stringify(d)),32),m=new DataView(new ArrayBuffer(on));m.setUint32(0,T.byteLength,!0),m.setUint32(4,aa,!0);const A=new ArrayBuffer(an),O=new DataView(A);O.setUint32(0,na,!0),O.setUint32(4,ra,!0);const M=an+m.byteLength+T.byteLength+b.byteLength+R.byteLength;O.setUint32(8,M,!0),new Blob([A,m,T,b,R],{type:"application/octet-stream"}).arrayBuffer().then(n)}):d.buffers&&d.buffers.length>0?tn(_).then(S=>{d.buffers[0].uri=S,n(d)}):n(d)}serializeUserData(e,n){if(Object.keys(e.userData).length===0)return;const t=this.options,i=this.extensionsUsed;try{const u=JSON.parse(JSON.stringify(e.userData));if(t.includeCustomExtensions&&u.gltfExtensions){n.extensions===void 0&&(n.extensions={});for(const d in u.gltfExtensions)n.extensions[d]=u.gltfExtensions[d],i[d]=!0;delete u.gltfExtensions}Object.keys(u).length>0&&(n.extras=u)}catch(u){console.warn("THREE.GLTFExporter: userData of '"+e.name+"' won't be serialized because of JSON.stringify error - "+u.message)}}getUID(e,n=!1){if(this.uids.has(e)===!1){const t=new Map;t.set(!0,this.uid++),t.set(!1,this.uid++),this.uids.set(e,t)}return this.uids.get(e).get(n)}isNormalizedNormalAttribute(e){if(this.cache.attributesNormalized.has(e))return!1;const n=new q;for(let t=0,i=e.count;t<i;t++)if(Math.abs(n.fromBufferAttribute(e,t).length()-1)>5e-4)return!1;return!0}createNormalizedNormalAttribute(e){const n=this.cache;if(n.attributesNormalized.has(e))return n.attributesNormalized.get(e);const t=e.clone(),i=new q;for(let u=0,d=t.count;u<d;u++)i.fromBufferAttribute(t,u),i.x===0&&i.y===0&&i.z===0?i.setX(1):i.normalize(),t.setXYZ(u,i.x,i.y,i.z);return n.attributesNormalized.set(e,t),t}applyTextureTransform(e,n){let t=!1;const i={};(n.offset.x!==0||n.offset.y!==0)&&(i.offset=n.offset.toArray(),t=!0),n.rotation!==0&&(i.rotation=n.rotation,t=!0),(n.repeat.x!==1||n.repeat.y!==1)&&(i.scale=n.repeat.toArray(),t=!0),t&&(e.extensions=e.extensions||{},e.extensions.KHR_texture_transform=i,this.extensionsUsed.KHR_texture_transform=!0)}buildMetalRoughTexture(e,n){if(e===n)return e;function t(S){return("colorSpace"in S?S.colorSpace==="srgb":S.encoding===3001)?function(R){return R<.04045?R*.0773993808:Math.pow(R*.9478672986+.0521327014,2.4)}:function(R){return R}}console.warn("THREE.GLTFExporter: Merged metalnessMap and roughnessMap textures."),e instanceof Mt&&(e=It(e)),n instanceof Mt&&(n=It(n));const i=e?e.image:null,u=n?n.image:null,d=Math.max(i?i.width:0,u?u.width:0),p=Math.max(i?i.height:0,u?u.height:0),w=sn();w.width=d,w.height=p;const _=w.getContext("2d");_.fillStyle="#00ffff",_.fillRect(0,0,d,p);const E=_.getImageData(0,0,d,p);if(i){_.drawImage(i,0,0,d,p);const S=t(e),R=_.getImageData(0,0,d,p).data;for(let b=2;b<R.length;b+=4)E.data[b]=S(R[b]/256)*256}if(u){_.drawImage(u,0,0,d,p);const S=t(n),R=_.getImageData(0,0,d,p).data;for(let b=1;b<R.length;b+=4)E.data[b]=S(R[b]/256)*256}_.putImageData(E,0,0);const D=(e||n).clone();return D.source=new On(w).source,"colorSpace"in D?D.colorSpace="":D.encoding=3e3,D.channel=(e||n).channel,e&&n&&e.channel!==n.channel&&console.warn("THREE.GLTFExporter: UV channels for metalnessMap and roughnessMap textures must match."),D}processBuffer(e){const n=this.json,t=this.buffers;return n.buffers||(n.buffers=[{byteLength:0}]),t.push(e),0}processBufferView(e,n,t,i,u){const d=this.json;d.bufferViews||(d.bufferViews=[]);let p;switch(n){case X.BYTE:case X.UNSIGNED_BYTE:p=1;break;case X.SHORT:case X.UNSIGNED_SHORT:p=2;break;default:p=4}const w=Ln(i*e.itemSize*p),_=new DataView(new ArrayBuffer(w));let E=0;for(let S=t;S<t+i;S++)for(let R=0;R<e.itemSize;R++){let b;e.itemSize>4?b=e.array[S*e.itemSize+R]:(R===0?b=e.getX(S):R===1?b=e.getY(S):R===2?b=e.getZ(S):R===3&&(b=e.getW(S)),e.normalized===!0&&(b=Le.normalize(b,e.array))),n===X.FLOAT?_.setFloat32(E,b,!0):n===X.INT?_.setInt32(E,b,!0):n===X.UNSIGNED_INT?_.setUint32(E,b,!0):n===X.SHORT?_.setInt16(E,b,!0):n===X.UNSIGNED_SHORT?_.setUint16(E,b,!0):n===X.BYTE?_.setInt8(E,b):n===X.UNSIGNED_BYTE&&_.setUint8(E,b),E+=p}const D={buffer:this.processBuffer(_.buffer),byteOffset:this.byteOffset,byteLength:w};return u!==void 0&&(D.target=u),u===X.ARRAY_BUFFER&&(D.byteStride=e.itemSize*p),this.byteOffset+=w,d.bufferViews.push(D),{id:d.bufferViews.length-1,byteLength:0}}processBufferViewImage(e){const n=this,t=n.json;return t.bufferViews||(t.bufferViews=[]),e.arrayBuffer().then(i=>{const u=Rt(i),d={buffer:n.processBuffer(u),byteOffset:n.byteOffset,byteLength:u.byteLength};return n.byteOffset+=u.byteLength,t.bufferViews.push(d)-1})}processAccessor(e,n,t,i){const u=this.json,d={1:"SCALAR",2:"VEC2",3:"VEC3",4:"VEC4",9:"MAT3",16:"MAT4"};let p;if(e.array.constructor===Float32Array)p=X.FLOAT;else if(e.array.constructor===Int32Array)p=X.INT;else if(e.array.constructor===Uint32Array)p=X.UNSIGNED_INT;else if(e.array.constructor===Int16Array)p=X.SHORT;else if(e.array.constructor===Uint16Array)p=X.UNSIGNED_SHORT;else if(e.array.constructor===Int8Array)p=X.BYTE;else if(e.array.constructor===Uint8Array)p=X.UNSIGNED_BYTE;else throw new Error("THREE.GLTFExporter: Unsupported bufferAttribute component type: "+e.array.constructor.name);if(t===void 0&&(t=0),i===void 0&&(i=e.count),i===0)return null;const w=la(e,t,i);let _;n!==void 0&&(_=e===n.index?X.ELEMENT_ARRAY_BUFFER:X.ARRAY_BUFFER);const E=this.processBufferView(e,p,t,i,_),D={bufferView:E.id,byteOffset:E.byteOffset,componentType:p,count:i,max:w.max,min:w.min,type:d[e.itemSize]};return e.normalized===!0&&(D.normalized=!0),u.accessors||(u.accessors=[]),u.accessors.push(D)-1}processImage(e,n,t,i="image/png"){if(e!==null){const u=this,d=u.cache,p=u.json,w=u.options,_=u.pending;d.images.has(e)||d.images.set(e,{});const E=d.images.get(e),D=i+":flipY/"+t.toString();if(E[D]!==void 0)return E[D];p.images||(p.images=[]);const S={mimeType:i},R=sn();R.width=Math.min(e.width,w.maxTextureSize),R.height=Math.min(e.height,w.maxTextureSize);const b=R.getContext("2d");if(t===!0&&(b.translate(0,R.height),b.scale(1,-1)),e.data!==void 0){n!==Ut&&console.error("GLTFExporter: Only RGBAFormat is supported.",n),(e.width>w.maxTextureSize||e.height>w.maxTextureSize)&&console.warn("GLTFExporter: Image size is bigger than maxTextureSize",e);const m=new Uint8ClampedArray(e.height*e.width*4);for(let A=0;A<m.length;A+=4)m[A+0]=e.data[A+0],m[A+1]=e.data[A+1],m[A+2]=e.data[A+2],m[A+3]=e.data[A+3];b.putImageData(new ImageData(m,e.width,e.height),0,0)}else b.drawImage(e,0,0,R.width,R.height);w.binary===!0?_.push(ln(R,i).then(m=>u.processBufferViewImage(m)).then(m=>{S.bufferView=m})):R.toDataURL!==void 0?S.uri=R.toDataURL(i):_.push(ln(R,i).then(tn).then(m=>{S.uri=m}));const T=p.images.push(S)-1;return E[D]=T,T}else throw new Error("THREE.GLTFExporter: No valid image data found. Unable to process texture.")}processSampler(e){const n=this.json;n.samplers||(n.samplers=[]);const t={magFilter:ye[e.magFilter],minFilter:ye[e.minFilter],wrapS:ye[e.wrapS],wrapT:ye[e.wrapT]};return n.samplers.push(t)-1}processTexture(e){const n=this.options,t=this.cache,i=this.json;if(t.textures.has(e))return t.textures.get(e);i.textures||(i.textures=[]),e instanceof Mt&&(e=It(e,n.maxTextureSize));let u=e.userData.mimeType;u==="image/webp"&&(u="image/png");const d={sampler:this.processSampler(e),source:this.processImage(e.image,e.format,e.flipY,u)};e.name&&(d.name=e.name),this._invokeAll(function(w){w.writeTexture&&w.writeTexture(e,d)});const p=i.textures.push(d)-1;return t.textures.set(e,p),p}processMaterial(e){const n=this.cache,t=this.json;if(n.materials.has(e))return n.materials.get(e);if(e.isShaderMaterial)return console.warn("GLTFExporter: THREE.ShaderMaterial not supported."),null;t.materials||(t.materials=[]);const i={pbrMetallicRoughness:{}};e.isMeshStandardMaterial!==!0&&e.isMeshBasicMaterial!==!0&&console.warn("GLTFExporter: Use MeshStandardMaterial or MeshBasicMaterial for best results.");const u=e.color.toArray().concat([e.opacity]);if(We(u,[1,1,1,1])||(i.pbrMetallicRoughness.baseColorFactor=u),e.isMeshStandardMaterial?(i.pbrMetallicRoughness.metallicFactor=e.metalness,i.pbrMetallicRoughness.roughnessFactor=e.roughness):(i.pbrMetallicRoughness.metallicFactor=.5,i.pbrMetallicRoughness.roughnessFactor=.5),e.metalnessMap||e.roughnessMap){const p=this.buildMetalRoughTexture(e.metalnessMap,e.roughnessMap),w={index:this.processTexture(p),channel:p.channel};this.applyTextureTransform(w,p),i.pbrMetallicRoughness.metallicRoughnessTexture=w}if(e.map){const p={index:this.processTexture(e.map),texCoord:e.map.channel};this.applyTextureTransform(p,e.map),i.pbrMetallicRoughness.baseColorTexture=p}if(e.emissive){const p=e.emissive;if(Math.max(p.r,p.g,p.b)>0&&(i.emissiveFactor=e.emissive.toArray()),e.emissiveMap){const w={index:this.processTexture(e.emissiveMap),texCoord:e.emissiveMap.channel};this.applyTextureTransform(w,e.emissiveMap),i.emissiveTexture=w}}if(e.normalMap){const p={index:this.processTexture(e.normalMap),texCoord:e.normalMap.channel};e.normalScale&&e.normalScale.x!==1&&(p.scale=e.normalScale.x),this.applyTextureTransform(p,e.normalMap),i.normalTexture=p}if(e.aoMap){const p={index:this.processTexture(e.aoMap),texCoord:e.aoMap.channel};e.aoMapIntensity!==1&&(p.strength=e.aoMapIntensity),this.applyTextureTransform(p,e.aoMap),i.occlusionTexture=p}e.transparent?i.alphaMode="BLEND":e.alphaTest>0&&(i.alphaMode="MASK",i.alphaCutoff=e.alphaTest),e.side===Lt&&(i.doubleSided=!0),e.name!==""&&(i.name=e.name),this.serializeUserData(e,i),this._invokeAll(function(p){p.writeMaterial&&p.writeMaterial(e,i)});const d=t.materials.push(i)-1;return n.materials.set(e,d),d}processMesh(e){const n=this.cache,t=this.json,i=[e.geometry.uuid];if(Array.isArray(e.material))for(let M=0,I=e.material.length;M<I;M++)i.push(e.material[M].uuid);else i.push(e.material.uuid);const u=i.join(":");if(n.meshes.has(u))return n.meshes.get(u);const d=e.geometry;let p;e.isLineSegments?p=X.LINES:e.isLineLoop?p=X.LINE_LOOP:e.isLine?p=X.LINE_STRIP:e.isPoints?p=X.POINTS:p=e.material.wireframe?X.LINES:X.TRIANGLES;const w={},_={},E=[],D=[],S={...Ht>=152?{uv:"TEXCOORD_0",uv1:"TEXCOORD_1",uv2:"TEXCOORD_2",uv3:"TEXCOORD_3"}:{uv:"TEXCOORD_0",uv2:"TEXCOORD_1"},color:"COLOR_0",skinWeight:"WEIGHTS_0",skinIndex:"JOINTS_0"},R=d.getAttribute("normal");R!==void 0&&!this.isNormalizedNormalAttribute(R)&&(console.warn("THREE.GLTFExporter: Creating normalized normal attribute from the non-normalized one."),d.setAttribute("normal",this.createNormalizedNormalAttribute(R)));let b=null;for(let M in d.attributes){if(M.slice(0,5)==="morph")continue;const I=d.attributes[M];if(M=S[M]||M.toUpperCase(),/^(POSITION|NORMAL|TANGENT|TEXCOORD_\d+|COLOR_\d+|JOINTS_\d+|WEIGHTS_\d+)$/.test(M)||(M="_"+M),n.attributes.has(this.getUID(I))){_[M]=n.attributes.get(this.getUID(I));continue}b=null;const P=I.array;M==="JOINTS_0"&&!(P instanceof Uint16Array)&&!(P instanceof Uint8Array)&&(console.warn('GLTFExporter: Attribute "skinIndex" converted to type UNSIGNED_SHORT.'),b=new it(new Uint16Array(P),I.itemSize,I.normalized));const c=this.processAccessor(b||I,d);c!==null&&(M.startsWith("_")||this.detectMeshQuantization(M,I),_[M]=c,n.attributes.set(this.getUID(I),c))}if(R!==void 0&&d.setAttribute("normal",R),Object.keys(_).length===0)return null;if(e.morphTargetInfluences!==void 0&&e.morphTargetInfluences.length>0){const M=[],I=[],P={};if(e.morphTargetDictionary!==void 0)for(const c in e.morphTargetDictionary)P[e.morphTargetDictionary[c]]=c;for(let c=0;c<e.morphTargetInfluences.length;++c){const v={};let l=!1;for(const s in d.morphAttributes){if(s!=="position"&&s!=="normal"){l||(console.warn("GLTFExporter: Only POSITION and NORMAL morph are supported."),l=!0);continue}const a=d.morphAttributes[s][c],h=s.toUpperCase(),y=d.attributes[s];if(n.attributes.has(this.getUID(a,!0))){v[h]=n.attributes.get(this.getUID(a,!0));continue}const F=a.clone();if(!d.morphTargetsRelative)for(let z=0,L=a.count;z<L;z++)for(let k=0;k<a.itemSize;k++)k===0&&F.setX(z,a.getX(z)-y.getX(z)),k===1&&F.setY(z,a.getY(z)-y.getY(z)),k===2&&F.setZ(z,a.getZ(z)-y.getZ(z)),k===3&&F.setW(z,a.getW(z)-y.getW(z));v[h]=this.processAccessor(F,d),n.attributes.set(this.getUID(y,!0),v[h])}D.push(v),M.push(e.morphTargetInfluences[c]),e.morphTargetDictionary!==void 0&&I.push(P[c])}w.weights=M,I.length>0&&(w.extras={},w.extras.targetNames=I)}const T=Array.isArray(e.material);if(T&&d.groups.length===0)return null;const m=T?e.material:[e.material],A=T?d.groups:[{materialIndex:0,start:void 0,count:void 0}];for(let M=0,I=A.length;M<I;M++){const P={mode:p,attributes:_};if(this.serializeUserData(d,P),D.length>0&&(P.targets=D),d.index!==null){let v=this.getUID(d.index);(A[M].start!==void 0||A[M].count!==void 0)&&(v+=":"+A[M].start+":"+A[M].count),n.attributes.has(v)?P.indices=n.attributes.get(v):(P.indices=this.processAccessor(d.index,d,A[M].start,A[M].count),n.attributes.set(v,P.indices)),P.indices===null&&delete P.indices}const c=this.processMaterial(m[A[M].materialIndex]);c!==null&&(P.material=c),E.push(P)}w.primitives=E,t.meshes||(t.meshes=[]),this._invokeAll(function(M){M.writeMesh&&M.writeMesh(e,w)});const O=t.meshes.push(w)-1;return n.meshes.set(u,O),O}detectMeshQuantization(e,n){if(this.extensionsUsed[At])return;let t;switch(n.array.constructor){case Int8Array:t="byte";break;case Uint8Array:t="unsigned byte";break;case Int16Array:t="short";break;case Uint16Array:t="unsigned short";break;default:return}n.normalized&&(t+=" normalized");const i=e.split("_",1)[0];nn[i]&&nn[i].includes(t)&&(this.extensionsUsed[At]=!0,this.extensionsRequired[At]=!0)}processCamera(e){const n=this.json;n.cameras||(n.cameras=[]);const t=e.isOrthographicCamera,i={type:t?"orthographic":"perspective"};return t?i.orthographic={xmag:e.right*2,ymag:e.top*2,zfar:e.far<=0?.001:e.far,znear:e.near<0?0:e.near}:i.perspective={aspectRatio:e.aspect,yfov:Le.degToRad(e.fov),zfar:e.far<=0?.001:e.far,znear:e.near<0?0:e.near},e.name!==""&&(i.name=e.type),n.cameras.push(i)-1}processAnimation(e,n){const t=this.json,i=this.nodeMap;t.animations||(t.animations=[]),e=Fn.Utils.mergeMorphTargetTracks(e.clone(),n);const u=e.tracks,d=[],p=[];for(let w=0;w<u.length;++w){const _=u[w],E=ht.parseTrackName(_.name);let D=ht.findNode(n,E.nodeName);const S=rn[E.propertyName];if(E.objectName==="bones"&&(D.isSkinnedMesh===!0?D=D.skeleton.getBoneByName(E.objectIndex):D=void 0),!D||!S)return console.warn('THREE.GLTFExporter: Could not export animation track "%s".',_.name),null;const R=1;let b=_.values.length/_.times.length;S===rn.morphTargetInfluences&&(b/=D.morphTargetInfluences.length);let T;_.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline===!0?(T="CUBICSPLINE",b/=3):_.getInterpolation()===vr?T="STEP":T="LINEAR",p.push({input:this.processAccessor(new it(_.times,R)),output:this.processAccessor(new it(_.values,b)),interpolation:T}),d.push({sampler:p.length-1,target:{node:i.get(D),path:S}})}return t.animations.push({name:e.name||"clip_"+t.animations.length,samplers:p,channels:d}),t.animations.length-1}processSkin(e){const n=this.json,t=this.nodeMap,i=n.nodes[t.get(e)],u=e.skeleton;if(u===void 0)return null;const d=e.skeleton.bones[0];if(d===void 0)return null;const p=[],w=new Float32Array(u.bones.length*16),_=new Je;for(let E=0;E<u.bones.length;++E)p.push(t.get(u.bones[E])),_.copy(u.boneInverses[E]),_.multiply(e.bindMatrix).toArray(w,E*16);return n.skins===void 0&&(n.skins=[]),n.skins.push({inverseBindMatrices:this.processAccessor(new it(w,16)),joints:p,skeleton:t.get(d)}),i.skin=n.skins.length-1}processNode(e){const n=this.json,t=this.options,i=this.nodeMap;n.nodes||(n.nodes=[]);const u={};if(t.trs){const p=e.quaternion.toArray(),w=e.position.toArray(),_=e.scale.toArray();We(p,[0,0,0,1])||(u.rotation=p),We(w,[0,0,0])||(u.translation=w),We(_,[1,1,1])||(u.scale=_)}else e.matrixAutoUpdate&&e.updateMatrix(),sa(e.matrix)===!1&&(u.matrix=e.matrix.elements);if(e.name!==""&&(u.name=String(e.name)),this.serializeUserData(e,u),e.isMesh||e.isLine||e.isPoints){const p=this.processMesh(e);p!==null&&(u.mesh=p)}else e.isCamera&&(u.camera=this.processCamera(e));if(e.isSkinnedMesh&&this.skins.push(e),e.children.length>0){const p=[];for(let w=0,_=e.children.length;w<_;w++){const E=e.children[w];if(E.visible||t.onlyVisible===!1){const D=this.processNode(E);D!==null&&p.push(D)}}p.length>0&&(u.children=p)}this._invokeAll(function(p){p.writeNode&&p.writeNode(e,u)});const d=n.nodes.push(u)-1;return i.set(e,d),d}processScene(e){const n=this.json,t=this.options;n.scenes||(n.scenes=[],n.scene=0);const i={};e.name!==""&&(i.name=e.name),n.scenes.push(i);const u=[];for(let d=0,p=e.children.length;d<p;d++){const w=e.children[d];if(w.visible||t.onlyVisible===!1){const _=this.processNode(w);_!==null&&u.push(_)}}u.length>0&&(i.nodes=u),this.serializeUserData(e,i)}processObjects(e){const n=new kt;n.name="AuxScene";for(let t=0;t<e.length;t++)n.children.push(e[t]);this.processScene(n)}processInput(e){const n=this.options;e=e instanceof Array?e:[e],this._invokeAll(function(i){i.beforeParse&&i.beforeParse(e)});const t=[];for(let i=0;i<e.length;i++)e[i]instanceof kt?this.processScene(e[i]):t.push(e[i]);t.length>0&&this.processObjects(t);for(let i=0;i<this.skins.length;++i)this.processSkin(this.skins[i]);for(let i=0;i<n.animations.length;++i)this.processAnimation(n.animations[i],e[0]);this._invokeAll(function(i){i.afterParse&&i.afterParse(e)})}_invokeAll(e){for(let n=0,t=this.plugins.length;n<t;n++)e(this.plugins[n])}}class ca{constructor(e){this.writer=e,this.name="KHR_lights_punctual"}writeNode(e,n){if(!e.isLight)return;if(!e.isDirectionalLight&&!e.isPointLight&&!e.isSpotLight){console.warn("THREE.GLTFExporter: Only directional, point, and spot lights are supported.",e);return}const t=this.writer,i=t.json,u=t.extensionsUsed,d={};e.name&&(d.name=e.name),d.color=e.color.toArray(),d.intensity=e.intensity,e.isDirectionalLight?d.type="directional":e.isPointLight?(d.type="point",e.distance>0&&(d.range=e.distance)):e.isSpotLight&&(d.type="spot",e.distance>0&&(d.range=e.distance),d.spot={},d.spot.innerConeAngle=(e.penumbra-1)*e.angle*-1,d.spot.outerConeAngle=e.angle),e.decay!==void 0&&e.decay!==2&&console.warn("THREE.GLTFExporter: Light decay may be lost. glTF is physically-based, and expects light.decay=2."),e.target&&(e.target.parent!==e||e.target.position.x!==0||e.target.position.y!==0||e.target.position.z!==-1)&&console.warn("THREE.GLTFExporter: Light direction may be lost. For best results, make light.target a child of the light with position 0,0,-1."),u[this.name]||(i.extensions=i.extensions||{},i.extensions[this.name]={lights:[]},u[this.name]=!0);const p=i.extensions[this.name].lights;p.push(d),n.extensions=n.extensions||{},n.extensions[this.name]={light:p.length-1}}}let fa=class{constructor(r){this.writer=r,this.name="KHR_materials_unlit"}writeMaterial(r,e){if(!r.isMeshBasicMaterial)return;const n=this.writer.extensionsUsed;e.extensions=e.extensions||{},e.extensions[this.name]={},n[this.name]=!0,e.pbrMetallicRoughness.metallicFactor=0,e.pbrMetallicRoughness.roughnessFactor=.9}},pa=class{constructor(r){this.writer=r,this.name="KHR_materials_clearcoat"}writeMaterial(r,e){if(!r.isMeshPhysicalMaterial||r.clearcoat===0)return;const n=this.writer,t=n.extensionsUsed,i={};if(i.clearcoatFactor=r.clearcoat,r.clearcoatMap){const u={index:n.processTexture(r.clearcoatMap),texCoord:r.clearcoatMap.channel};n.applyTextureTransform(u,r.clearcoatMap),i.clearcoatTexture=u}if(i.clearcoatRoughnessFactor=r.clearcoatRoughness,r.clearcoatRoughnessMap){const u={index:n.processTexture(r.clearcoatRoughnessMap),texCoord:r.clearcoatRoughnessMap.channel};n.applyTextureTransform(u,r.clearcoatRoughnessMap),i.clearcoatRoughnessTexture=u}if(r.clearcoatNormalMap){const u={index:n.processTexture(r.clearcoatNormalMap),texCoord:r.clearcoatNormalMap.channel};n.applyTextureTransform(u,r.clearcoatNormalMap),i.clearcoatNormalTexture=u}e.extensions=e.extensions||{},e.extensions[this.name]=i,t[this.name]=!0}},ha=class{constructor(r){this.writer=r,this.name="KHR_materials_iridescence"}writeMaterial(r,e){if(!r.isMeshPhysicalMaterial||r.iridescence===0)return;const n=this.writer,t=n.extensionsUsed,i={};if(i.iridescenceFactor=r.iridescence,r.iridescenceMap){const u={index:n.processTexture(r.iridescenceMap),texCoord:r.iridescenceMap.channel};n.applyTextureTransform(u,r.iridescenceMap),i.iridescenceTexture=u}if(i.iridescenceIor=r.iridescenceIOR,i.iridescenceThicknessMinimum=r.iridescenceThicknessRange[0],i.iridescenceThicknessMaximum=r.iridescenceThicknessRange[1],r.iridescenceThicknessMap){const u={index:n.processTexture(r.iridescenceThicknessMap),texCoord:r.iridescenceThicknessMap.channel};n.applyTextureTransform(u,r.iridescenceThicknessMap),i.iridescenceThicknessTexture=u}e.extensions=e.extensions||{},e.extensions[this.name]=i,t[this.name]=!0}},da=class{constructor(r){this.writer=r,this.name="KHR_materials_transmission"}writeMaterial(r,e){if(!r.isMeshPhysicalMaterial||r.transmission===0)return;const n=this.writer,t=n.extensionsUsed,i={};if(i.transmissionFactor=r.transmission,r.transmissionMap){const u={index:n.processTexture(r.transmissionMap),texCoord:r.transmissionMap.channel};n.applyTextureTransform(u,r.transmissionMap),i.transmissionTexture=u}e.extensions=e.extensions||{},e.extensions[this.name]=i,t[this.name]=!0}},ma=class{constructor(r){this.writer=r,this.name="KHR_materials_volume"}writeMaterial(r,e){if(!r.isMeshPhysicalMaterial||r.transmission===0)return;const n=this.writer,t=n.extensionsUsed,i={};if(i.thicknessFactor=r.thickness,r.thicknessMap){const u={index:n.processTexture(r.thicknessMap),texCoord:r.thicknessMap.channel};n.applyTextureTransform(u,r.thicknessMap),i.thicknessTexture=u}i.attenuationDistance=r.attenuationDistance,i.attenuationColor=r.attenuationColor.toArray(),e.extensions=e.extensions||{},e.extensions[this.name]=i,t[this.name]=!0}},ga=class{constructor(r){this.writer=r,this.name="KHR_materials_ior"}writeMaterial(r,e){if(!r.isMeshPhysicalMaterial||r.ior===1.5)return;const n=this.writer.extensionsUsed,t={};t.ior=r.ior,e.extensions=e.extensions||{},e.extensions[this.name]=t,n[this.name]=!0}},va=class{constructor(r){this.writer=r,this.name="KHR_materials_specular"}writeMaterial(r,e){if(!r.isMeshPhysicalMaterial||r.specularIntensity===1&&r.specularColor.equals(ta)&&!r.specularIntensityMap&&!r.specularColorTexture)return;const n=this.writer,t=n.extensionsUsed,i={};if(r.specularIntensityMap){const u={index:n.processTexture(r.specularIntensityMap),texCoord:r.specularIntensityMap.channel};n.applyTextureTransform(u,r.specularIntensityMap),i.specularTexture=u}if(r.specularColorMap){const u={index:n.processTexture(r.specularColorMap),texCoord:r.specularColorMap.channel};n.applyTextureTransform(u,r.specularColorMap),i.specularColorTexture=u}i.specularFactor=r.specularIntensity,i.specularColorFactor=r.specularColor.toArray(),e.extensions=e.extensions||{},e.extensions[this.name]=i,t[this.name]=!0}},ya=class{constructor(r){this.writer=r,this.name="KHR_materials_sheen"}writeMaterial(r,e){if(!r.isMeshPhysicalMaterial||r.sheen==0)return;const n=this.writer,t=n.extensionsUsed,i={};if(r.sheenRoughnessMap){const u={index:n.processTexture(r.sheenRoughnessMap),texCoord:r.sheenRoughnessMap.channel};n.applyTextureTransform(u,r.sheenRoughnessMap),i.sheenRoughnessTexture=u}if(r.sheenColorMap){const u={index:n.processTexture(r.sheenColorMap),texCoord:r.sheenColorMap.channel};n.applyTextureTransform(u,r.sheenColorMap),i.sheenColorTexture=u}i.sheenRoughnessFactor=r.sheenRoughness,i.sheenColorFactor=r.sheenColor.toArray(),e.extensions=e.extensions||{},e.extensions[this.name]=i,t[this.name]=!0}},ba=class{constructor(r){this.writer=r,this.name="KHR_materials_anisotropy"}writeMaterial(r,e){if(!r.isMeshPhysicalMaterial||r.anisotropy==0)return;const n=this.writer,t=n.extensionsUsed,i={};if(r.anisotropyMap){const u={index:n.processTexture(r.anisotropyMap)};n.applyTextureTransform(u,r.anisotropyMap),i.anisotropyTexture=u}i.anisotropyStrength=r.anisotropy,i.anisotropyRotation=r.anisotropyRotation,e.extensions=e.extensions||{},e.extensions[this.name]=i,t[this.name]=!0}},xa=class{constructor(r){this.writer=r,this.name="KHR_materials_emissive_strength"}writeMaterial(r,e){if(!r.isMeshStandardMaterial||r.emissiveIntensity===1)return;const n=this.writer.extensionsUsed,t={};t.emissiveStrength=r.emissiveIntensity,e.extensions=e.extensions||{},e.extensions[this.name]=t,n[this.name]=!0}};var tt=Uint8Array,Vn=Uint16Array,wa=Uint32Array,Ma=new tt([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),_a=new tt([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Yn=function(r,e){for(var n=new Vn(31),t=0;t<31;++t)n[t]=e+=1<<r[t-1];for(var i=new wa(n[30]),t=1;t<30;++t)for(var u=n[t];u<n[t+1];++u)i[u]=u-n[t]<<5|t;return[n,i]},Gn=Yn(Ma,2),Ta=Gn[0],Ea=Gn[1];Ta[28]=258,Ea[258]=28;Yn(_a,0);var Ia=new Vn(32768);for(var se=0;se<32768;++se){var Se=(se&43690)>>>1|(se&21845)<<1;Se=(Se&52428)>>>2|(Se&13107)<<2,Se=(Se&61680)>>>4|(Se&3855)<<4,Ia[se]=((Se&65280)>>>8|(Se&255)<<8)>>>1}var vt=new tt(288);for(var se=0;se<144;++se)vt[se]=8;for(var se=144;se<256;++se)vt[se]=9;for(var se=256;se<280;++se)vt[se]=7;for(var se=280;se<288;++se)vt[se]=8;var Aa=new tt(32);for(var se=0;se<32;++se)Aa[se]=5;var Ra=new tt(0),Na=typeof TextDecoder<"u"&&new TextDecoder,Da=0;try{Na.decode(Ra,{stream:!0}),Da=1}catch{}var Oa=Object.defineProperty,Pa=(r,e,n)=>e in r?Oa(r,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[e]=n,Sa=(r,e,n)=>(Pa(r,e+"",n),n);const Hn=class extends Fe{constructor(r,e={}){super(r),this.isReflector=!0,this.type="Reflector",this.camera=new Ce;const n=this,t=e.color!==void 0?new Oe(e.color):new Oe(8355711),i=e.textureWidth||512,u=e.textureHeight||512,d=e.clipBias||0,p=e.shader||Hn.ReflectorShader,w=e.multisample!==void 0?e.multisample:4,_=new Rn,E=new q,D=new q,S=new q,R=new Je,b=new q(0,0,-1),T=new Be,m=new q,A=new q,O=new Be,M=new Je,I=this.camera,P=new dr(i,u,{samples:w,type:mr}),c=new Qe({uniforms:Ft.clone(p.uniforms),fragmentShader:p.fragmentShader,vertexShader:p.vertexShader});c.uniforms.tDiffuse.value=P.texture,c.uniforms.color.value=t,c.uniforms.textureMatrix.value=M,this.material=c,this.onBeforeRender=function(v,l,s){if(D.setFromMatrixPosition(n.matrixWorld),S.setFromMatrixPosition(s.matrixWorld),R.extractRotation(n.matrixWorld),E.set(0,0,1),E.applyMatrix4(R),m.subVectors(D,S),m.dot(E)>0)return;m.reflect(E).negate(),m.add(D),R.extractRotation(s.matrixWorld),b.set(0,0,-1),b.applyMatrix4(R),b.add(S),A.subVectors(D,b),A.reflect(E).negate(),A.add(D),I.position.copy(m),I.up.set(0,1,0),I.up.applyMatrix4(R),I.up.reflect(E),I.lookAt(A),I.far=s.far,I.updateMatrixWorld(),I.projectionMatrix.copy(s.projectionMatrix),M.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),M.multiply(I.projectionMatrix),M.multiply(I.matrixWorldInverse),M.multiply(n.matrixWorld),_.setFromNormalAndCoplanarPoint(E,D),_.applyMatrix4(I.matrixWorldInverse),T.set(_.normal.x,_.normal.y,_.normal.z,_.constant);const a=I.projectionMatrix;O.x=(Math.sign(T.x)+a.elements[8])/a.elements[0],O.y=(Math.sign(T.y)+a.elements[9])/a.elements[5],O.z=-1,O.w=(1+a.elements[10])/a.elements[14],T.multiplyScalar(2/T.dot(O)),a.elements[2]=T.x,a.elements[6]=T.y,a.elements[10]=T.z+1-d,a.elements[14]=T.w,n.visible=!1;const h=v.getRenderTarget(),y=v.xr.enabled,F=v.shadowMap.autoUpdate,z=v.toneMapping;let L=!1;"outputColorSpace"in v?L=v.outputColorSpace==="srgb":L=v.outputEncoding===3001,v.xr.enabled=!1,v.shadowMap.autoUpdate=!1,"outputColorSpace"in v?v.outputColorSpace="srgb-linear":v.outputEncoding=3e3,v.toneMapping=gr,v.setRenderTarget(P),v.state.buffers.depth.setMask(!0),v.autoClear===!1&&v.clear(),v.render(l,I),v.xr.enabled=y,v.shadowMap.autoUpdate=F,v.toneMapping=z,"outputColorSpace"in v?v.outputColorSpace=L?"srgb":"srgb-linear":v.outputEncoding=L?3001:3e3,v.setRenderTarget(h);const k=s.viewport;k!==void 0&&v.state.viewport(k),n.visible=!0},this.getRenderTarget=function(){return P},this.dispose=function(){P.dispose(),n.material.dispose()}}};let Bt=Hn;Sa(Bt,"ReflectorShader",{uniforms:{color:{value:null},tDiffuse:{value:null},textureMatrix:{value:null}},vertexShader:`
		uniform mat4 textureMatrix;
		varying vec4 vUv;

		#include <common>
		#include <logdepthbuf_pars_vertex>

		void main() {

			vUv = textureMatrix * vec4( position, 1.0 );

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

			#include <logdepthbuf_vertex>

		}`,fragmentShader:`
		uniform vec3 color;
		uniform sampler2D tDiffuse;
		varying vec4 vUv;

		#include <logdepthbuf_pars_fragment>

		float blendOverlay( float base, float blend ) {

			return( base < 0.5 ? ( 2.0 * base * blend ) : ( 1.0 - 2.0 * ( 1.0 - base ) * ( 1.0 - blend ) ) );

		}

		vec3 blendOverlay( vec3 base, vec3 blend ) {

			return vec3( blendOverlay( base.r, blend.r ), blendOverlay( base.g, blend.g ), blendOverlay( base.b, blend.b ) );

		}

		void main() {

			#include <logdepthbuf_fragment>

			vec4 base = texture2DProj( tDiffuse, vUv );
			gl_FragColor = vec4( blendOverlay( base.rgb, color ), 1.0 );

			#include <tonemapping_fragment>
			#include <${Ht>=154?"colorspace_fragment":"encodings_fragment"}>

		}`});var Ua=Object.defineProperty,ka=(r,e,n)=>e in r?Ua(r,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[e]=n,Kn=(r,e,n)=>(ka(r,typeof e!="symbol"?e+"":e,n),n);const yt=new or,Ba=new Float32Array([-1,-1,0,0,0,1,-1,0,1,0,1,1,0,1,1,-1,1,0,0,1]),Zn=new ir(Ba,5);yt.setIndex([0,1,2,0,2,3]);yt.setAttribute("position",new An(Zn,3,0,!1));yt.setAttribute("uv",new An(Zn,2,3,!1));const Ct=class extends Fe{constructor(){super(Ct.Geometry,new yr({opacity:0,transparent:!0})),this.isLensflare=!0,this.type="Lensflare",this.frustumCulled=!1,this.renderOrder=1/0;const r=new q,e=new q,n=new Jt(new Uint8Array(16*16*3),16,16,Ut);n.minFilter=qe,n.magFilter=qe,n.wrapS=$e,n.wrapT=$e;const t=new Jt(new Uint8Array(16*16*3),16,16,Ut);t.minFilter=qe,t.magFilter=qe,t.wrapS=$e,t.wrapT=$e;const i=Ct.Geometry,u=new _t({uniforms:{scale:{value:null},screenPosition:{value:null}},vertexShader:`

				precision highp float;

				uniform vec3 screenPosition;
				uniform vec2 scale;

				attribute vec3 position;

				void main() {

					gl_Position = vec4( position.xy * scale + screenPosition.xy, screenPosition.z, 1.0 );

				}`,fragmentShader:`

				precision highp float;

				void main() {

					gl_FragColor = vec4( 1.0, 0.0, 1.0, 1.0 );

				}`,depthTest:!0,depthWrite:!1,transparent:!1}),d=new _t({uniforms:{map:{value:n},scale:{value:null},screenPosition:{value:null}},vertexShader:`

				precision highp float;

				uniform vec3 screenPosition;
				uniform vec2 scale;

				attribute vec3 position;
				attribute vec2 uv;

				varying vec2 vUV;

				void main() {

					vUV = uv;

					gl_Position = vec4( position.xy * scale + screenPosition.xy, screenPosition.z, 1.0 );

				}`,fragmentShader:`

				precision highp float;

				uniform sampler2D map;

				varying vec2 vUV;

				void main() {

					gl_FragColor = texture2D( map, vUV );

				}`,depthTest:!1,depthWrite:!1,transparent:!1}),p=new Fe(i,u),w=[],_=qn.Shader,E=new _t({uniforms:{map:{value:null},occlusionMap:{value:t},color:{value:new Oe(16777215)},scale:{value:new pe},screenPosition:{value:new q}},vertexShader:_.vertexShader,fragmentShader:_.fragmentShader,blending:br,transparent:!0,depthWrite:!1}),D=new Fe(i,E);this.addElement=function(m){w.push(m)};const S=new pe,R=new pe,b=new xr,T=new Be;this.onBeforeRender=function(m,A,O){m.getCurrentViewport(T);const M=T.w/T.z,I=T.z/2,P=T.w/2;let c=16/T.w;if(S.set(c*M,c),b.min.set(T.x,T.y),b.max.set(T.x+(T.z-16),T.y+(T.w-16)),e.setFromMatrixPosition(this.matrixWorld),e.applyMatrix4(O.matrixWorldInverse),!(e.z>0)&&(r.copy(e).applyMatrix4(O.projectionMatrix),R.x=T.x+r.x*I+I-8,R.y=T.y+r.y*P+P-8,b.containsPoint(R))){m.copyFramebufferToTexture(R,n);let v=u.uniforms;v.scale.value=S,v.screenPosition.value=r,m.renderBufferDirect(O,null,i,u,p,null),m.copyFramebufferToTexture(R,t),v=d.uniforms,v.scale.value=S,v.screenPosition.value=r,m.renderBufferDirect(O,null,i,d,p,null);const l=-r.x*2,s=-r.y*2;for(let a=0,h=w.length;a<h;a++){const y=w[a],F=E.uniforms;F.color.value.copy(y.color),F.map.value=y.texture,F.screenPosition.value.x=r.x+l*y.distance,F.screenPosition.value.y=r.y+s*y.distance,c=y.size/T.w;const z=T.w/T.z;F.scale.value.set(c*z,c),E.uniformsNeedUpdate=!0,m.renderBufferDirect(O,null,i,E,D,null)}}},this.dispose=function(){u.dispose(),d.dispose(),E.dispose(),n.dispose(),t.dispose();for(let m=0,A=w.length;m<A;m++)w[m].texture.dispose()}}};let Ca=Ct;Kn(Ca,"Geometry",yt);class qn{constructor(e,n=1,t=0,i=new Oe(16777215)){this.texture=e,this.size=n,this.distance=t,this.color=i}}Kn(qn,"Shader",{uniforms:{map:{value:null},occlusionMap:{value:null},color:{value:null},scale:{value:null},screenPosition:{value:null}},vertexShader:`

		precision highp float;

		uniform vec3 screenPosition;
		uniform vec2 scale;

		uniform sampler2D occlusionMap;

		attribute vec3 position;
		attribute vec2 uv;

		varying vec2 vUV;
		varying float vVisibility;

		void main() {

			vUV = uv;

			vec2 pos = position.xy;

			vec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );
			visibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );
			visibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );
			visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );
			visibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );
			visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );
			visibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );
			visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );
			visibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );

			vVisibility =        visibility.r / 9.0;
			vVisibility *= 1.0 - visibility.g / 9.0;
			vVisibility *=       visibility.b / 9.0;

			gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );

		}`,fragmentShader:`

		precision highp float;

		uniform sampler2D map;
		uniform vec3 color;

		varying vec2 vUV;
		varying float vVisibility;

		void main() {

			vec4 texture = texture2D( map, vUV );
			texture.a *= vVisibility;
			gl_FragColor = texture;
			gl_FragColor.rgb *= color;

		}`});var ja=Object.defineProperty,za=(r,e,n)=>e in r?ja(r,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[e]=n,$n=(r,e,n)=>(za(r,typeof e!="symbol"?e+"":e,n),n);const pt={uniforms:{turbidity:{value:2},rayleigh:{value:1},mieCoefficient:{value:.005},mieDirectionalG:{value:.8},sunPosition:{value:new q},up:{value:new q(0,1,0)}},vertexShader:`
      uniform vec3 sunPosition;
      uniform float rayleigh;
      uniform float turbidity;
      uniform float mieCoefficient;
      uniform vec3 up;

      varying vec3 vWorldPosition;
      varying vec3 vSunDirection;
      varying float vSunfade;
      varying vec3 vBetaR;
      varying vec3 vBetaM;
      varying float vSunE;

      // constants for atmospheric scattering
      const float e = 2.71828182845904523536028747135266249775724709369995957;
      const float pi = 3.141592653589793238462643383279502884197169;

      // wavelength of used primaries, according to preetham
      const vec3 lambda = vec3( 680E-9, 550E-9, 450E-9 );
      // this pre-calcuation replaces older TotalRayleigh(vec3 lambda) function:
      // (8.0 * pow(pi, 3.0) * pow(pow(n, 2.0) - 1.0, 2.0) * (6.0 + 3.0 * pn)) / (3.0 * N * pow(lambda, vec3(4.0)) * (6.0 - 7.0 * pn))
      const vec3 totalRayleigh = vec3( 5.804542996261093E-6, 1.3562911419845635E-5, 3.0265902468824876E-5 );

      // mie stuff
      // K coefficient for the primaries
      const float v = 4.0;
      const vec3 K = vec3( 0.686, 0.678, 0.666 );
      // MieConst = pi * pow( ( 2.0 * pi ) / lambda, vec3( v - 2.0 ) ) * K
      const vec3 MieConst = vec3( 1.8399918514433978E14, 2.7798023919660528E14, 4.0790479543861094E14 );

      // earth shadow hack
      // cutoffAngle = pi / 1.95;
      const float cutoffAngle = 1.6110731556870734;
      const float steepness = 1.5;
      const float EE = 1000.0;

      float sunIntensity( float zenithAngleCos ) {
        zenithAngleCos = clamp( zenithAngleCos, -1.0, 1.0 );
        return EE * max( 0.0, 1.0 - pow( e, -( ( cutoffAngle - acos( zenithAngleCos ) ) / steepness ) ) );
      }

      vec3 totalMie( float T ) {
        float c = ( 0.2 * T ) * 10E-18;
        return 0.434 * c * MieConst;
      }

      void main() {

        vec4 worldPosition = modelMatrix * vec4( position, 1.0 );
        vWorldPosition = worldPosition.xyz;

        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        gl_Position.z = gl_Position.w; // set z to camera.far

        vSunDirection = normalize( sunPosition );

        vSunE = sunIntensity( dot( vSunDirection, up ) );

        vSunfade = 1.0 - clamp( 1.0 - exp( ( sunPosition.y / 450000.0 ) ), 0.0, 1.0 );

        float rayleighCoefficient = rayleigh - ( 1.0 * ( 1.0 - vSunfade ) );

      // extinction (absorbtion + out scattering)
      // rayleigh coefficients
        vBetaR = totalRayleigh * rayleighCoefficient;

      // mie coefficients
        vBetaM = totalMie( turbidity ) * mieCoefficient;

      }
    `,fragmentShader:`
      varying vec3 vWorldPosition;
      varying vec3 vSunDirection;
      varying float vSunfade;
      varying vec3 vBetaR;
      varying vec3 vBetaM;
      varying float vSunE;

      uniform float mieDirectionalG;
      uniform vec3 up;

      const vec3 cameraPos = vec3( 0.0, 0.0, 0.0 );

      // constants for atmospheric scattering
      const float pi = 3.141592653589793238462643383279502884197169;

      const float n = 1.0003; // refractive index of air
      const float N = 2.545E25; // number of molecules per unit volume for air at 288.15K and 1013mb (sea level -45 celsius)

      // optical length at zenith for molecules
      const float rayleighZenithLength = 8.4E3;
      const float mieZenithLength = 1.25E3;
      // 66 arc seconds -> degrees, and the cosine of that
      const float sunAngularDiameterCos = 0.999956676946448443553574619906976478926848692873900859324;

      // 3.0 / ( 16.0 * pi )
      const float THREE_OVER_SIXTEENPI = 0.05968310365946075;
      // 1.0 / ( 4.0 * pi )
      const float ONE_OVER_FOURPI = 0.07957747154594767;

      float rayleighPhase( float cosTheta ) {
        return THREE_OVER_SIXTEENPI * ( 1.0 + pow( cosTheta, 2.0 ) );
      }

      float hgPhase( float cosTheta, float g ) {
        float g2 = pow( g, 2.0 );
        float inverse = 1.0 / pow( 1.0 - 2.0 * g * cosTheta + g2, 1.5 );
        return ONE_OVER_FOURPI * ( ( 1.0 - g2 ) * inverse );
      }

      void main() {

        vec3 direction = normalize( vWorldPosition - cameraPos );

      // optical length
      // cutoff angle at 90 to avoid singularity in next formula.
        float zenithAngle = acos( max( 0.0, dot( up, direction ) ) );
        float inverse = 1.0 / ( cos( zenithAngle ) + 0.15 * pow( 93.885 - ( ( zenithAngle * 180.0 ) / pi ), -1.253 ) );
        float sR = rayleighZenithLength * inverse;
        float sM = mieZenithLength * inverse;

      // combined extinction factor
        vec3 Fex = exp( -( vBetaR * sR + vBetaM * sM ) );

      // in scattering
        float cosTheta = dot( direction, vSunDirection );

        float rPhase = rayleighPhase( cosTheta * 0.5 + 0.5 );
        vec3 betaRTheta = vBetaR * rPhase;

        float mPhase = hgPhase( cosTheta, mieDirectionalG );
        vec3 betaMTheta = vBetaM * mPhase;

        vec3 Lin = pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * ( 1.0 - Fex ), vec3( 1.5 ) );
        Lin *= mix( vec3( 1.0 ), pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * Fex, vec3( 1.0 / 2.0 ) ), clamp( pow( 1.0 - dot( up, vSunDirection ), 5.0 ), 0.0, 1.0 ) );

      // nightsky
        float theta = acos( direction.y ); // elevation --> y-axis, [-pi/2, pi/2]
        float phi = atan( direction.z, direction.x ); // azimuth --> x-axis [-pi/2, pi/2]
        vec2 uv = vec2( phi, theta ) / vec2( 2.0 * pi, pi ) + vec2( 0.5, 0.0 );
        vec3 L0 = vec3( 0.1 ) * Fex;

      // composition + solar disc
        float sundisk = smoothstep( sunAngularDiameterCos, sunAngularDiameterCos + 0.00002, cosTheta );
        L0 += ( vSunE * 19000.0 * Fex ) * sundisk;

        vec3 texColor = ( Lin + L0 ) * 0.04 + vec3( 0.0, 0.0003, 0.00075 );

        vec3 retColor = pow( texColor, vec3( 1.0 / ( 1.2 + ( 1.2 * vSunfade ) ) ) );

        gl_FragColor = vec4( retColor, 1.0 );

      #include <tonemapping_fragment>
      #include <${Ht>=154?"colorspace_fragment":"encodings_fragment"}>

      }
    `},Wn=new Qe({name:"SkyShader",fragmentShader:pt.fragmentShader,vertexShader:pt.vertexShader,uniforms:Ft.clone(pt.uniforms),side:sr,depthWrite:!1});class Xn extends Fe{constructor(){super(new hr(1,1,1),Wn)}}$n(Xn,"SkyShader",pt);$n(Xn,"material",Wn);new lr;new q;new Pn(0,0,0,"YXZ");new q;var Fa=Object.defineProperty,La=(r,e,n)=>e in r?Fa(r,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[e]=n,V=(r,e,n)=>(La(r,typeof e!="symbol"?e+"":e,n),n);const ct=new ur,un=new Rn,Va=Math.cos(70*(Math.PI/180)),cn=(r,e)=>(r%e+e)%e;class Ya extends Ar{constructor(e,n){super(),V(this,"object"),V(this,"domElement"),V(this,"enabled",!0),V(this,"target",new q),V(this,"minDistance",0),V(this,"maxDistance",1/0),V(this,"minZoom",0),V(this,"maxZoom",1/0),V(this,"minPolarAngle",0),V(this,"maxPolarAngle",Math.PI),V(this,"minAzimuthAngle",-1/0),V(this,"maxAzimuthAngle",1/0),V(this,"enableDamping",!1),V(this,"dampingFactor",.05),V(this,"enableZoom",!0),V(this,"zoomSpeed",1),V(this,"enableRotate",!0),V(this,"rotateSpeed",1),V(this,"enablePan",!0),V(this,"panSpeed",1),V(this,"screenSpacePanning",!0),V(this,"keyPanSpeed",7),V(this,"zoomToCursor",!1),V(this,"autoRotate",!1),V(this,"autoRotateSpeed",2),V(this,"reverseOrbit",!1),V(this,"reverseHorizontalOrbit",!1),V(this,"reverseVerticalOrbit",!1),V(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),V(this,"mouseButtons",{LEFT:De.ROTATE,MIDDLE:De.DOLLY,RIGHT:De.PAN}),V(this,"touches",{ONE:Ue.ROTATE,TWO:Ue.DOLLY_PAN}),V(this,"target0"),V(this,"position0"),V(this,"zoom0"),V(this,"_domElementKeyEvents",null),V(this,"getPolarAngle"),V(this,"getAzimuthalAngle"),V(this,"setPolarAngle"),V(this,"setAzimuthalAngle"),V(this,"getDistance"),V(this,"getZoomScale"),V(this,"listenToKeyEvents"),V(this,"stopListenToKeyEvents"),V(this,"saveState"),V(this,"reset"),V(this,"update"),V(this,"connect"),V(this,"dispose"),V(this,"dollyIn"),V(this,"dollyOut"),V(this,"getScale"),V(this,"setScale"),this.object=e,this.domElement=n,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>E.phi,this.getAzimuthalAngle=()=>E.theta,this.setPolarAngle=x=>{let j=cn(x,2*Math.PI),G=E.phi;G<0&&(G+=2*Math.PI),j<0&&(j+=2*Math.PI);let re=Math.abs(j-G);2*Math.PI-re<re&&(j<G?j+=2*Math.PI:G+=2*Math.PI),D.phi=j-G,t.update()},this.setAzimuthalAngle=x=>{let j=cn(x,2*Math.PI),G=E.theta;G<0&&(G+=2*Math.PI),j<0&&(j+=2*Math.PI);let re=Math.abs(j-G);2*Math.PI-re<re&&(j<G?j+=2*Math.PI:G+=2*Math.PI),D.theta=j-G,t.update()},this.getDistance=()=>t.object.position.distanceTo(t.target),this.listenToKeyEvents=x=>{x.addEventListener("keydown",Ye),this._domElementKeyEvents=x},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",Ye),this._domElementKeyEvents=null},this.saveState=()=>{t.target0.copy(t.target),t.position0.copy(t.object.position),t.zoom0=t.object.zoom},this.reset=()=>{t.target.copy(t.target0),t.object.position.copy(t.position0),t.object.zoom=t.zoom0,t.object.updateProjectionMatrix(),t.dispatchEvent(i),t.update(),w=p.NONE},this.update=(()=>{const x=new q,j=new q(0,1,0),G=new en().setFromUnitVectors(e.up,j),re=G.clone().invert(),ve=new q,Me=new en,at=2*Math.PI;return function(){const Xt=t.object.position;G.setFromUnitVectors(e.up,j),re.copy(G).invert(),x.copy(Xt).sub(t.target),x.applyQuaternion(G),E.setFromVector3(x),t.autoRotate&&w===p.NONE&&z(y()),t.enableDamping?(E.theta+=D.theta*t.dampingFactor,E.phi+=D.phi*t.dampingFactor):(E.theta+=D.theta,E.phi+=D.phi);let Re=t.minAzimuthAngle,Ne=t.maxAzimuthAngle;isFinite(Re)&&isFinite(Ne)&&(Re<-Math.PI?Re+=at:Re>Math.PI&&(Re-=at),Ne<-Math.PI?Ne+=at:Ne>Math.PI&&(Ne-=at),Re<=Ne?E.theta=Math.max(Re,Math.min(Ne,E.theta)):E.theta=E.theta>(Re+Ne)/2?Math.max(Re,E.theta):Math.min(Ne,E.theta)),E.phi=Math.max(t.minPolarAngle,Math.min(t.maxPolarAngle,E.phi)),E.makeSafe(),t.enableDamping===!0?t.target.addScaledVector(R,t.dampingFactor):t.target.add(R),t.zoomToCursor&&s||t.object.isOrthographicCamera?E.radius=ge(E.radius):E.radius=ge(E.radius*S),x.setFromSpherical(E),x.applyQuaternion(re),Xt.copy(t.target).add(x),t.object.matrixAutoUpdate||t.object.updateMatrix(),t.object.lookAt(t.target),t.enableDamping===!0?(D.theta*=1-t.dampingFactor,D.phi*=1-t.dampingFactor,R.multiplyScalar(1-t.dampingFactor)):(D.set(0,0,0),R.set(0,0,0));let He=!1;if(t.zoomToCursor&&s){let Ke=null;if(t.object instanceof Ce&&t.object.isPerspectiveCamera){const Ze=x.length();Ke=ge(Ze*S);const ot=Ze-Ke;t.object.position.addScaledVector(v,ot),t.object.updateMatrixWorld()}else if(t.object.isOrthographicCamera){const Ze=new q(l.x,l.y,0);Ze.unproject(t.object),t.object.zoom=Math.max(t.minZoom,Math.min(t.maxZoom,t.object.zoom/S)),t.object.updateProjectionMatrix(),He=!0;const ot=new q(l.x,l.y,0);ot.unproject(t.object),t.object.position.sub(ot).add(Ze),t.object.updateMatrixWorld(),Ke=x.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),t.zoomToCursor=!1;Ke!==null&&(t.screenSpacePanning?t.target.set(0,0,-1).transformDirection(t.object.matrix).multiplyScalar(Ke).add(t.object.position):(ct.origin.copy(t.object.position),ct.direction.set(0,0,-1).transformDirection(t.object.matrix),Math.abs(t.object.up.dot(ct.direction))<Va?e.lookAt(t.target):(un.setFromNormalAndCoplanarPoint(t.object.up,t.target),ct.intersectPlane(un,t.target))))}else t.object instanceof Xe&&t.object.isOrthographicCamera&&(He=S!==1,He&&(t.object.zoom=Math.max(t.minZoom,Math.min(t.maxZoom,t.object.zoom/S)),t.object.updateProjectionMatrix()));return S=1,s=!1,He||ve.distanceToSquared(t.object.position)>_||8*(1-Me.dot(t.object.quaternion))>_?(t.dispatchEvent(i),ve.copy(t.object.position),Me.copy(t.object.quaternion),He=!1,!0):!1}})(),this.connect=x=>{t.domElement=x,t.domElement.style.touchAction="none",t.domElement.addEventListener("contextmenu",$t),t.domElement.addEventListener("pointerdown",ie),t.domElement.addEventListener("pointercancel",Te),t.domElement.addEventListener("wheel",rt)},this.dispose=()=>{var x,j,G,re,ve,Me;t.domElement&&(t.domElement.style.touchAction="auto"),(x=t.domElement)==null||x.removeEventListener("contextmenu",$t),(j=t.domElement)==null||j.removeEventListener("pointerdown",ie),(G=t.domElement)==null||G.removeEventListener("pointercancel",Te),(re=t.domElement)==null||re.removeEventListener("wheel",rt),(ve=t.domElement)==null||ve.ownerDocument.removeEventListener("pointermove",xe),(Me=t.domElement)==null||Me.ownerDocument.removeEventListener("pointerup",Te),t._domElementKeyEvents!==null&&t._domElementKeyEvents.removeEventListener("keydown",Ye)};const t=this,i={type:"change"},u={type:"start"},d={type:"end"},p={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let w=p.NONE;const _=1e-6,E=new Qt,D=new Qt;let S=1;const R=new q,b=new pe,T=new pe,m=new pe,A=new pe,O=new pe,M=new pe,I=new pe,P=new pe,c=new pe,v=new q,l=new pe;let s=!1;const a=[],h={};function y(){return 2*Math.PI/60/60*t.autoRotateSpeed}function F(){return Math.pow(.95,t.zoomSpeed)}function z(x){t.reverseOrbit||t.reverseHorizontalOrbit?D.theta+=x:D.theta-=x}function L(x){t.reverseOrbit||t.reverseVerticalOrbit?D.phi+=x:D.phi-=x}const k=(()=>{const x=new q;return function(j,G){x.setFromMatrixColumn(G,0),x.multiplyScalar(-j),R.add(x)}})(),J=(()=>{const x=new q;return function(j,G){t.screenSpacePanning===!0?x.setFromMatrixColumn(G,1):(x.setFromMatrixColumn(G,0),x.crossVectors(t.object.up,x)),x.multiplyScalar(j),R.add(x)}})(),Q=(()=>{const x=new q;return function(j,G){const re=t.domElement;if(re&&t.object instanceof Ce&&t.object.isPerspectiveCamera){const ve=t.object.position;x.copy(ve).sub(t.target);let Me=x.length();Me*=Math.tan(t.object.fov/2*Math.PI/180),k(2*j*Me/re.clientHeight,t.object.matrix),J(2*G*Me/re.clientHeight,t.object.matrix)}else re&&t.object instanceof Xe&&t.object.isOrthographicCamera?(k(j*(t.object.right-t.object.left)/t.object.zoom/re.clientWidth,t.object.matrix),J(G*(t.object.top-t.object.bottom)/t.object.zoom/re.clientHeight,t.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),t.enablePan=!1)}})();function K(x){t.object instanceof Ce&&t.object.isPerspectiveCamera||t.object instanceof Xe&&t.object.isOrthographicCamera?S=x:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),t.enableZoom=!1)}function Z(x){K(S/x)}function le(x){K(S*x)}function _e(x){if(!t.zoomToCursor||!t.domElement)return;s=!0;const j=t.domElement.getBoundingClientRect(),G=x.clientX-j.left,re=x.clientY-j.top,ve=j.width,Me=j.height;l.x=G/ve*2-1,l.y=-(re/Me)*2+1,v.set(l.x,l.y,1).unproject(t.object).sub(t.object.position).normalize()}function ge(x){return Math.max(t.minDistance,Math.min(t.maxDistance,x))}function ce(x){b.set(x.clientX,x.clientY)}function fe(x){_e(x),I.set(x.clientX,x.clientY)}function he(x){A.set(x.clientX,x.clientY)}function be(x){T.set(x.clientX,x.clientY),m.subVectors(T,b).multiplyScalar(t.rotateSpeed);const j=t.domElement;j&&(z(2*Math.PI*m.x/j.clientHeight),L(2*Math.PI*m.y/j.clientHeight)),b.copy(T),t.update()}function C(x){P.set(x.clientX,x.clientY),c.subVectors(P,I),c.y>0?Z(F()):c.y<0&&le(F()),I.copy(P),t.update()}function o(x){O.set(x.clientX,x.clientY),M.subVectors(O,A).multiplyScalar(t.panSpeed),Q(M.x,M.y),A.copy(O),t.update()}function f(x){_e(x),x.deltaY<0?le(F()):x.deltaY>0&&Z(F()),t.update()}function g(x){let j=!1;switch(x.code){case t.keys.UP:Q(0,t.keyPanSpeed),j=!0;break;case t.keys.BOTTOM:Q(0,-t.keyPanSpeed),j=!0;break;case t.keys.LEFT:Q(t.keyPanSpeed,0),j=!0;break;case t.keys.RIGHT:Q(-t.keyPanSpeed,0),j=!0;break}j&&(x.preventDefault(),t.update())}function U(){if(a.length==1)b.set(a[0].pageX,a[0].pageY);else{const x=.5*(a[0].pageX+a[1].pageX),j=.5*(a[0].pageY+a[1].pageY);b.set(x,j)}}function N(){if(a.length==1)A.set(a[0].pageX,a[0].pageY);else{const x=.5*(a[0].pageX+a[1].pageX),j=.5*(a[0].pageY+a[1].pageY);A.set(x,j)}}function B(){const x=a[0].pageX-a[1].pageX,j=a[0].pageY-a[1].pageY,G=Math.sqrt(x*x+j*j);I.set(0,G)}function Y(){t.enableZoom&&B(),t.enablePan&&N()}function ee(){t.enableZoom&&B(),t.enableRotate&&U()}function ae(x){if(a.length==1)T.set(x.pageX,x.pageY);else{const G=wt(x),re=.5*(x.pageX+G.x),ve=.5*(x.pageY+G.y);T.set(re,ve)}m.subVectors(T,b).multiplyScalar(t.rotateSpeed);const j=t.domElement;j&&(z(2*Math.PI*m.x/j.clientHeight),L(2*Math.PI*m.y/j.clientHeight)),b.copy(T)}function W(x){if(a.length==1)O.set(x.pageX,x.pageY);else{const j=wt(x),G=.5*(x.pageX+j.x),re=.5*(x.pageY+j.y);O.set(G,re)}M.subVectors(O,A).multiplyScalar(t.panSpeed),Q(M.x,M.y),A.copy(O)}function te(x){const j=wt(x),G=x.pageX-j.x,re=x.pageY-j.y,ve=Math.sqrt(G*G+re*re);P.set(0,ve),c.set(0,Math.pow(P.y/I.y,t.zoomSpeed)),Z(c.y),I.copy(P)}function ue(x){t.enableZoom&&te(x),t.enablePan&&W(x)}function ne(x){t.enableZoom&&te(x),t.enableRotate&&ae(x)}function ie(x){var j,G;t.enabled!==!1&&(a.length===0&&((j=t.domElement)==null||j.ownerDocument.addEventListener("pointermove",xe),(G=t.domElement)==null||G.ownerDocument.addEventListener("pointerup",Te)),tr(x),x.pointerType==="touch"?Ae(x):bt(x))}function xe(x){t.enabled!==!1&&(x.pointerType==="touch"?Ge(x):xt(x))}function Te(x){var j,G,re;nr(x),a.length===0&&((j=t.domElement)==null||j.releasePointerCapture(x.pointerId),(G=t.domElement)==null||G.ownerDocument.removeEventListener("pointermove",xe),(re=t.domElement)==null||re.ownerDocument.removeEventListener("pointerup",Te)),t.dispatchEvent(d),w=p.NONE}function bt(x){let j;switch(x.button){case 0:j=t.mouseButtons.LEFT;break;case 1:j=t.mouseButtons.MIDDLE;break;case 2:j=t.mouseButtons.RIGHT;break;default:j=-1}switch(j){case De.DOLLY:if(t.enableZoom===!1)return;fe(x),w=p.DOLLY;break;case De.ROTATE:if(x.ctrlKey||x.metaKey||x.shiftKey){if(t.enablePan===!1)return;he(x),w=p.PAN}else{if(t.enableRotate===!1)return;ce(x),w=p.ROTATE}break;case De.PAN:if(x.ctrlKey||x.metaKey||x.shiftKey){if(t.enableRotate===!1)return;ce(x),w=p.ROTATE}else{if(t.enablePan===!1)return;he(x),w=p.PAN}break;default:w=p.NONE}w!==p.NONE&&t.dispatchEvent(u)}function xt(x){if(t.enabled!==!1)switch(w){case p.ROTATE:if(t.enableRotate===!1)return;be(x);break;case p.DOLLY:if(t.enableZoom===!1)return;C(x);break;case p.PAN:if(t.enablePan===!1)return;o(x);break}}function rt(x){t.enabled===!1||t.enableZoom===!1||w!==p.NONE&&w!==p.ROTATE||(x.preventDefault(),t.dispatchEvent(u),f(x),t.dispatchEvent(d))}function Ye(x){t.enabled===!1||t.enablePan===!1||g(x)}function Ae(x){switch(Wt(x),a.length){case 1:switch(t.touches.ONE){case Ue.ROTATE:if(t.enableRotate===!1)return;U(),w=p.TOUCH_ROTATE;break;case Ue.PAN:if(t.enablePan===!1)return;N(),w=p.TOUCH_PAN;break;default:w=p.NONE}break;case 2:switch(t.touches.TWO){case Ue.DOLLY_PAN:if(t.enableZoom===!1&&t.enablePan===!1)return;Y(),w=p.TOUCH_DOLLY_PAN;break;case Ue.DOLLY_ROTATE:if(t.enableZoom===!1&&t.enableRotate===!1)return;ee(),w=p.TOUCH_DOLLY_ROTATE;break;default:w=p.NONE}break;default:w=p.NONE}w!==p.NONE&&t.dispatchEvent(u)}function Ge(x){switch(Wt(x),w){case p.TOUCH_ROTATE:if(t.enableRotate===!1)return;ae(x),t.update();break;case p.TOUCH_PAN:if(t.enablePan===!1)return;W(x),t.update();break;case p.TOUCH_DOLLY_PAN:if(t.enableZoom===!1&&t.enablePan===!1)return;ue(x),t.update();break;case p.TOUCH_DOLLY_ROTATE:if(t.enableZoom===!1&&t.enableRotate===!1)return;ne(x),t.update();break;default:w=p.NONE}}function $t(x){t.enabled!==!1&&x.preventDefault()}function tr(x){a.push(x)}function nr(x){delete h[x.pointerId];for(let j=0;j<a.length;j++)if(a[j].pointerId==x.pointerId){a.splice(j,1);return}}function Wt(x){let j=h[x.pointerId];j===void 0&&(j=new pe,h[x.pointerId]=j),j.set(x.pageX,x.pageY)}function wt(x){const j=x.pointerId===a[0].pointerId?a[1]:a[0];return h[j.pointerId]}this.dollyIn=(x=F())=>{le(x),t.update()},this.dollyOut=(x=F())=>{Z(x),t.update()},this.getScale=()=>S,this.setScale=x=>{K(x),t.update()},this.getZoomScale=()=>F(),n!==void 0&&this.connect(n),this.update()}}new Je;new q;class fn extends _r{constructor(e,n={}){const{bevelEnabled:t=!1,bevelSize:i=8,bevelThickness:u=10,font:d,height:p=50,size:w=100,lineHeight:_=1,letterSpacing:E=0,...D}=n;if(d===void 0)super();else{const S=d.generateShapes(e,w,{lineHeight:_,letterSpacing:E});super(S,{...D,bevelEnabled:t,bevelSize:i,bevelThickness:u,depth:p})}this.type="TextGeometry"}}new Pn;new q;var Ga=Object.defineProperty,Ha=(r,e,n)=>e in r?Ga(r,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[e]=n,Kt=(r,e,n)=>(Ha(r,typeof e!="symbol"?e+"":e,n),n);class Ka extends Tr{constructor(e){super(e)}load(e,n,t,i){const u=new Er(this.manager);u.setPath(this.path),u.setRequestHeader(this.requestHeader),u.setWithCredentials(this.withCredentials),u.load(e,d=>{if(typeof d!="string")throw new Error("unsupported data type");const p=JSON.parse(d),w=this.parse(p);n&&n(w)},t,i)}loadAsync(e,n){return super.loadAsync(e,n)}parse(e){return new Zt(e)}}class Zt{constructor(e){Kt(this,"data"),this.data=e}generateShapes(e,n=100,t){const i=[],u={letterSpacing:0,lineHeight:1,...t},d=Za(e,n,this.data,u);for(let p=0,w=d.length;p<w;p++)Array.prototype.push.apply(i,d[p].toShapes(!1));return i}}Kt(Zt,"isFont");Kt(Zt,"type");function Za(r,e,n,t){const i=Array.from(r),u=e/n.resolution,d=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*u,p=[];let w=0,_=0;for(let E=0;E<i.length;E++){const D=i[E];if(D===`
`)w=0,_-=d*t.lineHeight;else{const S=qa(D,u,w,_,n);S&&(w+=S.offsetX+t.letterSpacing,p.push(S.path))}}return p}function qa(r,e,n,t,i){const u=i.glyphs[r]||i.glyphs["?"];if(!u){console.error('THREE.Font: character "'+r+'" does not exists in font family '+i.familyName+".");return}const d=new Ir;let p,w,_,E,D,S,R,b;if(u.o){const T=u._cachedOutline||(u._cachedOutline=u.o.split(" "));for(let m=0,A=T.length;m<A;)switch(T[m++]){case"m":p=parseInt(T[m++])*e+n,w=parseInt(T[m++])*e+t,d.moveTo(p,w);break;case"l":p=parseInt(T[m++])*e+n,w=parseInt(T[m++])*e+t,d.lineTo(p,w);break;case"q":_=parseInt(T[m++])*e+n,E=parseInt(T[m++])*e+t,D=parseInt(T[m++])*e+n,S=parseInt(T[m++])*e+t,d.quadraticCurveTo(D,S,_,E);break;case"b":_=parseInt(T[m++])*e+n,E=parseInt(T[m++])*e+t,D=parseInt(T[m++])*e+n,S=parseInt(T[m++])*e+t,R=parseInt(T[m++])*e+n,b=parseInt(T[m++])*e+t,d.bezierCurveTo(D,S,R,b,_,E);break}}return{offsetX:u.ha*e,path:d}}new Nn;new q;new Be;new q;new q;new Be;new Be;new Be;new q;new Je;new cr;new q;new Nn;new fr;new Be;Le.clamp;Le.lerp;zn({screenspace:!1,color:new Oe("black"),opacity:1,thickness:.05,size:new pe(1,1)},`#include <common>
   #include <morphtarget_pars_vertex>
   #include <skinning_pars_vertex>
   uniform float thickness;
   uniform bool screenspace;
   uniform vec2 size;
   void main() {
     #if defined (USE_SKINNING)
       #include <beginnormal_vertex>
       #include <morphnormal_vertex>
       #include <skinbase_vertex>
       #include <skinnormal_vertex>
       #include <defaultnormal_vertex>
     #endif
     #include <begin_vertex>
     #include <morphtarget_vertex>
     #include <skinning_vertex>
     #include <project_vertex>
     vec4 tNormal = vec4(normal, 0.0);
     vec4 tPosition = vec4(transformed, 1.0);
     #ifdef USE_INSTANCING
       tNormal = instanceMatrix * tNormal;
       tPosition = instanceMatrix * tPosition;
     #endif
     if (screenspace) {
       vec3 newPosition = tPosition.xyz + tNormal.xyz * thickness;
       gl_Position = projectionMatrix * modelViewMatrix * vec4(newPosition, 1.0); 
     } else {
       vec4 clipPosition = projectionMatrix * modelViewMatrix * tPosition;
       vec4 clipNormal = projectionMatrix * modelViewMatrix * tNormal;
       vec2 offset = normalize(clipNormal.xy) * thickness / size * clipPosition.w * 2.0;
       clipPosition.xy += offset;
       gl_Position = clipPosition;
     }
   }`,`uniform vec3 color;
   uniform float opacity;
   void main(){
     gl_FragColor = vec4(color, opacity);
     #include <tonemapping_fragment>
     #include <colorspace_fragment>
   }`);const $a=["args","material-uniforms-color-value"];Bt.ReflectorShader;const Wa=["args","center"],Xa=et({__name:"Text3D",props:{font:{},text:{},size:{default:.5},height:{default:.2},curveSegments:{default:5},bevelEnabled:{type:Boolean,default:!0},bevelThickness:{default:.05},bevelSize:{default:.02},bevelOffset:{default:0},bevelSegments:{default:4},center:{type:Boolean,default:!1},needUpdates:{type:Boolean,default:!1}},async setup(r,{expose:e}){let n,t;const i=r,{center:u,font:d,text:p,needUpdates:w,size:_,height:E,curveSegments:D,bevelEnabled:S,bevelThickness:R,bevelSize:b,bevelOffset:T,bevelSegments:m}=gt(i),{extend:A,invalidate:O}=mt();Ve(i,()=>O()),A({TextGeometry:fn});const M=new Ka,I=Un(),P=ke(()=>{var s;return p!=null&&p.value?p.value:I.default?(s=I.default()[0].children)==null?void 0:s.trim():w.value?"":"TresJS"}),c=Vt();e({instance:c});const v=([n,t]=Cn(()=>new Promise((s,a)=>{try{typeof d.value=="string"?M.load(d.value,h=>{s(h)}):s(d.value)}catch(h){a(console.error("cientos",h))}})),n=await n,t(),n),l=ke(()=>({font:v,size:Pe(_),height:Pe(E),curveSegments:Pe(D),bevelEnabled:Pe(S),bevelThickness:Pe(R),bevelSize:Pe(b),bevelOffset:Pe(T),bevelSegments:Pe(m)}));return Yt(()=>{c.value&&w.value&&(c.value.geometry.dispose(),c.value.geometry=new fn(P.value,l.value),u.value&&c.value.geometry.center())}),(s,a)=>$(d)?(we(),Ie("TresMesh",{key:0,ref_key:"text3DRef",ref:c},[P.value?(we(),Ie("TresTextGeometry",{key:0,args:[P.value,l.value],center:$(u)},null,8,Wa)):dt("",!0),Sn(s.$slots,"default")],512)):dt("",!0)}});new q;new q;new q;var Nt;/Mac/.test((Nt=globalThis?.navigator)===null||Nt===void 0?void 0:Nt.platform);const Ja=["target","auto-rotate","auto-rotate-speed","enable-damping","damping-factor","enable-pan","key-pan-speed","keys","max-azimuth-angle","min-azimuth-angle","max-polar-angle","min-polar-angle","min-distance","max-distance","min-zoom","max-zoom","touches","enable-zoom","zoom-speed","enable-rotate","rotate-speed","mouse-buttons","args"],No=et({__name:"OrbitControls",props:{makeDefault:{type:Boolean,default:!1},camera:{},domElement:{},target:{default:()=>[0,0,0]},enableDamping:{type:Boolean,default:!0},dampingFactor:{default:.05},autoRotate:{type:Boolean,default:!1},autoRotateSpeed:{default:2},enablePan:{type:Boolean,default:!0},keyPanSpeed:{default:7},keys:{},maxAzimuthAngle:{default:Number.POSITIVE_INFINITY},minAzimuthAngle:{default:Number.NEGATIVE_INFINITY},maxPolarAngle:{default:Math.PI},minPolarAngle:{default:0},minDistance:{default:0},maxDistance:{default:Number.POSITIVE_INFINITY},minZoom:{default:0},maxZoom:{default:Number.POSITIVE_INFINITY},touches:{default:()=>({ONE:Ue.ROTATE,TWO:Ue.DOLLY_PAN})},enableZoom:{type:Boolean,default:!0},zoomSpeed:{default:1},enableRotate:{type:Boolean,default:!0},rotateSpeed:{default:1},mouseButtons:{default:()=>({LEFT:De.ROTATE,MIDDLE:De.DOLLY,RIGHT:De.PAN})}},emits:["change","start","end"],setup(r,{expose:e,emit:n}){const t=r,i=n,{makeDefault:u,autoRotate:d,autoRotateSpeed:p,enableDamping:w,dampingFactor:_,enablePan:E,keyPanSpeed:D,maxAzimuthAngle:S,minAzimuthAngle:R,maxPolarAngle:b,minPolarAngle:T,minDistance:m,maxDistance:A,minZoom:O,maxZoom:M,enableZoom:I,zoomSpeed:P,enableRotate:c,touches:v,rotateSpeed:l,target:s,mouseButtons:a}=gt(t),{camera:h,renderer:y,extend:F,controls:z,invalidate:L}=mt(),k=Vt(null);F({OrbitControls:Ya}),Ve(k,K=>{J(),K&&u.value?z.value=K:z.value=null});function J(){Tt(k.value,"change",()=>{i("change",k.value),L()}),Tt(k.value,"start",()=>i("start",k.value)),Tt(k.value,"end",()=>i("end",k.value))}const{onBeforeRender:Q}=In();return Q(({invalidate:K})=>{k.value&&(w.value||d.value)&&(k.value.update(),d.value&&K())}),kn(()=>{k.value&&k.value.dispose()}),e({instance:k}),(K,Z)=>(K.camera||$(h))&&(K.domElement||$(y))?(we(),Ie("TresOrbitControls",{key:0,ref_key:"controlsRef",ref:k,target:$(s),"auto-rotate":$(d),"auto-rotate-speed":$(p),"enable-damping":$(w),"damping-factor":$(_),"enable-pan":$(E),"key-pan-speed":$(D),keys:K.keys,"max-azimuth-angle":$(S),"min-azimuth-angle":$(R),"max-polar-angle":$(b),"min-polar-angle":$(T),"min-distance":$(m),"max-distance":$(A),"min-zoom":$(O),"max-zoom":$(M),touches:$(v),"enable-zoom":$(I),"zoom-speed":$(P),"enable-rotate":$(c),"rotate-speed":$(l),"mouse-buttons":$(a),args:[K.camera||$(h),K.domElement||$(y).domElement]},null,8,Ja)):dt("",!0)}});function ft(r){throw new Error('Could not dynamically require "'+r+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pn={exports:{}},hn;function Qa(){return hn||(hn=1,function(r,e){(function(n){r.exports=n()})(function(){return function n(t,i,u){function d(_,E){if(!i[_]){if(!t[_]){var D=typeof ft=="function"&&ft;if(!E&&D)return D(_,!0);if(p)return p(_,!0);throw new Error("Cannot find module '"+_+"'")}E=i[_]={exports:{}},t[_][0].call(E.exports,function(S){var R=t[_][1][S];return d(R||S)},E,E.exports,n,t,i,u)}return i[_].exports}for(var p=typeof ft=="function"&&ft,w=0;w<u.length;w++)d(u[w]);return d}({1:[function(n,t,i){(function(u,d,p,w,_,E,D,S,R){var b=n("crypto");function T(c,v){v=O(c,v);var l;return(l=v.algorithm!=="passthrough"?b.createHash(v.algorithm):new P).write===void 0&&(l.write=l.update,l.end=l.update),I(v,l).dispatch(c),l.update||l.end(""),l.digest?l.digest(v.encoding==="buffer"?void 0:v.encoding):(c=l.read(),v.encoding!=="buffer"?c.toString(v.encoding):c)}(i=t.exports=T).sha1=function(c){return T(c)},i.keys=function(c){return T(c,{excludeValues:!0,algorithm:"sha1",encoding:"hex"})},i.MD5=function(c){return T(c,{algorithm:"md5",encoding:"hex"})},i.keysMD5=function(c){return T(c,{algorithm:"md5",encoding:"hex",excludeValues:!0})};var m=b.getHashes?b.getHashes().slice():["sha1","md5"],A=(m.push("passthrough"),["buffer","hex","binary","base64"]);function O(c,v){var l={};if(l.algorithm=(v=v||{}).algorithm||"sha1",l.encoding=v.encoding||"hex",l.excludeValues=!!v.excludeValues,l.algorithm=l.algorithm.toLowerCase(),l.encoding=l.encoding.toLowerCase(),l.ignoreUnknown=v.ignoreUnknown===!0,l.respectType=v.respectType!==!1,l.respectFunctionNames=v.respectFunctionNames!==!1,l.respectFunctionProperties=v.respectFunctionProperties!==!1,l.unorderedArrays=v.unorderedArrays===!0,l.unorderedSets=v.unorderedSets!==!1,l.unorderedObjects=v.unorderedObjects!==!1,l.replacer=v.replacer||void 0,l.excludeKeys=v.excludeKeys||void 0,c===void 0)throw new Error("Object argument required.");for(var s=0;s<m.length;++s)m[s].toLowerCase()===l.algorithm.toLowerCase()&&(l.algorithm=m[s]);if(m.indexOf(l.algorithm)===-1)throw new Error('Algorithm "'+l.algorithm+'"  not supported. supported values: '+m.join(", "));if(A.indexOf(l.encoding)===-1&&l.algorithm!=="passthrough")throw new Error('Encoding "'+l.encoding+'"  not supported. supported values: '+A.join(", "));return l}function M(c){if(typeof c=="function")return/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(c))!=null}function I(c,v,l){l=l||[];function s(a){return v.update?v.update(a,"utf8"):v.write(a,"utf8")}return{dispatch:function(a){return this["_"+((a=c.replacer?c.replacer(a):a)===null?"null":typeof a)](a)},_object:function(a){var h,y=Object.prototype.toString.call(a),F=/\[object (.*)\]/i.exec(y);if(F=(F=F?F[1]:"unknown:["+y+"]").toLowerCase(),0<=(y=l.indexOf(a)))return this.dispatch("[CIRCULAR:"+y+"]");if(l.push(a),p!==void 0&&p.isBuffer&&p.isBuffer(a))return s("buffer:"),s(a);if(F==="object"||F==="function"||F==="asyncfunction")return y=Object.keys(a),c.unorderedObjects&&(y=y.sort()),c.respectType===!1||M(a)||y.splice(0,0,"prototype","__proto__","constructor"),c.excludeKeys&&(y=y.filter(function(z){return!c.excludeKeys(z)})),s("object:"+y.length+":"),h=this,y.forEach(function(z){h.dispatch(z),s(":"),c.excludeValues||h.dispatch(a[z]),s(",")});if(!this["_"+F]){if(c.ignoreUnknown)return s("["+F+"]");throw new Error('Unknown object type "'+F+'"')}this["_"+F](a)},_array:function(a,z){z=z!==void 0?z:c.unorderedArrays!==!1;var y=this;if(s("array:"+a.length+":"),!z||a.length<=1)return a.forEach(function(L){return y.dispatch(L)});var F=[],z=a.map(function(L){var k=new P,J=l.slice();return I(c,k,J).dispatch(L),F=F.concat(J.slice(l.length)),k.read().toString()});return l=l.concat(F),z.sort(),this._array(z,!1)},_date:function(a){return s("date:"+a.toJSON())},_symbol:function(a){return s("symbol:"+a.toString())},_error:function(a){return s("error:"+a.toString())},_boolean:function(a){return s("bool:"+a.toString())},_string:function(a){s("string:"+a.length+":"),s(a.toString())},_function:function(a){s("fn:"),M(a)?this.dispatch("[native]"):this.dispatch(a.toString()),c.respectFunctionNames!==!1&&this.dispatch("function-name:"+String(a.name)),c.respectFunctionProperties&&this._object(a)},_number:function(a){return s("number:"+a.toString())},_xml:function(a){return s("xml:"+a.toString())},_null:function(){return s("Null")},_undefined:function(){return s("Undefined")},_regexp:function(a){return s("regex:"+a.toString())},_uint8array:function(a){return s("uint8array:"),this.dispatch(Array.prototype.slice.call(a))},_uint8clampedarray:function(a){return s("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(a))},_int8array:function(a){return s("int8array:"),this.dispatch(Array.prototype.slice.call(a))},_uint16array:function(a){return s("uint16array:"),this.dispatch(Array.prototype.slice.call(a))},_int16array:function(a){return s("int16array:"),this.dispatch(Array.prototype.slice.call(a))},_uint32array:function(a){return s("uint32array:"),this.dispatch(Array.prototype.slice.call(a))},_int32array:function(a){return s("int32array:"),this.dispatch(Array.prototype.slice.call(a))},_float32array:function(a){return s("float32array:"),this.dispatch(Array.prototype.slice.call(a))},_float64array:function(a){return s("float64array:"),this.dispatch(Array.prototype.slice.call(a))},_arraybuffer:function(a){return s("arraybuffer:"),this.dispatch(new Uint8Array(a))},_url:function(a){return s("url:"+a.toString())},_map:function(a){return s("map:"),a=Array.from(a),this._array(a,c.unorderedSets!==!1)},_set:function(a){return s("set:"),a=Array.from(a),this._array(a,c.unorderedSets!==!1)},_file:function(a){return s("file:"),this.dispatch([a.name,a.size,a.type,a.lastModfied])},_blob:function(){if(c.ignoreUnknown)return s("[blob]");throw Error(`Hashing Blob objects is currently not supported
(see https://github.com/puleos/object-hash/issues/26)
Use "options.replacer" or "options.ignoreUnknown"
`)},_domwindow:function(){return s("domwindow")},_bigint:function(a){return s("bigint:"+a.toString())},_process:function(){return s("process")},_timer:function(){return s("timer")},_pipe:function(){return s("pipe")},_tcp:function(){return s("tcp")},_udp:function(){return s("udp")},_tty:function(){return s("tty")},_statwatcher:function(){return s("statwatcher")},_securecontext:function(){return s("securecontext")},_connection:function(){return s("connection")},_zlib:function(){return s("zlib")},_context:function(){return s("context")},_nodescript:function(){return s("nodescript")},_httpparser:function(){return s("httpparser")},_dataview:function(){return s("dataview")},_signal:function(){return s("signal")},_fsevent:function(){return s("fsevent")},_tlswrap:function(){return s("tlswrap")}}}function P(){return{buf:"",write:function(c){this.buf+=c},end:function(c){this.buf+=c},read:function(){return this.buf}}}i.writeToStream=function(c,v,l){return l===void 0&&(l=v,v={}),I(v=O(c,v),l).dispatch(c)}}).call(this,n("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},n("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/fake_9a5aa49d.js","/")},{buffer:3,crypto:5,lYpoI2:11}],2:[function(n,t,i){(function(u,d,p,w,_,E,D,S,R){(function(b){var T=typeof Uint8Array<"u"?Uint8Array:Array,m=43,A=47,O=48,M=97,I=65,P=45,c=95;function v(l){return l=l.charCodeAt(0),l===m||l===P?62:l===A||l===c?63:l<O?-1:l<O+10?l-O+26+26:l<I+26?l-I:l<M+26?l-M+26:void 0}b.toByteArray=function(l){var s,a;if(0<l.length%4)throw new Error("Invalid string. Length must be a multiple of 4");var h=l.length,h=l.charAt(h-2)==="="?2:l.charAt(h-1)==="="?1:0,y=new T(3*l.length/4-h),F=0<h?l.length-4:l.length,z=0;function L(k){y[z++]=k}for(s=0;s<F;s+=4,0)L((16711680&(a=v(l.charAt(s))<<18|v(l.charAt(s+1))<<12|v(l.charAt(s+2))<<6|v(l.charAt(s+3))))>>16),L((65280&a)>>8),L(255&a);return h==2?L(255&(a=v(l.charAt(s))<<2|v(l.charAt(s+1))>>4)):h==1&&(L((a=v(l.charAt(s))<<10|v(l.charAt(s+1))<<4|v(l.charAt(s+2))>>2)>>8&255),L(255&a)),y},b.fromByteArray=function(l){var s,a,h,y,F=l.length%3,z="";function L(k){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(k)}for(s=0,h=l.length-F;s<h;s+=3)a=(l[s]<<16)+(l[s+1]<<8)+l[s+2],z+=L((y=a)>>18&63)+L(y>>12&63)+L(y>>6&63)+L(63&y);switch(F){case 1:z=(z+=L((a=l[l.length-1])>>2))+L(a<<4&63)+"==";break;case 2:z=(z=(z+=L((a=(l[l.length-2]<<8)+l[l.length-1])>>10))+L(a>>4&63))+L(a<<2&63)+"="}return z}})(i===void 0?this.base64js={}:i)}).call(this,n("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},n("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/base64-js/lib/b64.js","/node_modules/gulp-browserify/node_modules/base64-js/lib")},{buffer:3,lYpoI2:11}],3:[function(n,t,i){(function(u,d,m,w,_,E,D,S,R){var b=n("base64-js"),T=n("ieee754");function m(o,f,g){if(!(this instanceof m))return new m(o,f,g);var U,N,B,Y,ee=typeof o;if(f==="base64"&&ee=="string")for(o=(Y=o).trim?Y.trim():Y.replace(/^\s+|\s+$/g,"");o.length%4!=0;)o+="=";if(ee=="number")U=Q(o);else if(ee=="string")U=m.byteLength(o,f);else{if(ee!="object")throw new Error("First argument needs to be a number, array or string.");U=Q(o.length)}if(m._useTypedArrays?N=m._augment(new Uint8Array(U)):((N=this).length=U,N._isBuffer=!0),m._useTypedArrays&&typeof o.byteLength=="number")N._set(o);else if(K(Y=o)||m.isBuffer(Y)||Y&&typeof Y=="object"&&typeof Y.length=="number")for(B=0;B<U;B++)m.isBuffer(o)?N[B]=o.readUInt8(B):N[B]=o[B];else if(ee=="string")N.write(o,0,f);else if(ee=="number"&&!m._useTypedArrays&&!g)for(B=0;B<U;B++)N[B]=0;return N}function A(o,f,g,U){return m._charsWritten=ge(function(N){for(var B=[],Y=0;Y<N.length;Y++)B.push(255&N.charCodeAt(Y));return B}(f),o,g,U)}function O(o,f,g,U){return m._charsWritten=ge(function(N){for(var B,Y,ee=[],ae=0;ae<N.length;ae++)Y=N.charCodeAt(ae),B=Y>>8,Y=Y%256,ee.push(Y),ee.push(B);return ee}(f),o,g,U)}function M(o,f,g){var U="";g=Math.min(o.length,g);for(var N=f;N<g;N++)U+=String.fromCharCode(o[N]);return U}function I(o,f,g,B){B||(C(typeof g=="boolean","missing or invalid endian"),C(f!=null,"missing offset"),C(f+1<o.length,"Trying to read beyond buffer length"));var N,B=o.length;if(!(B<=f))return g?(N=o[f],f+1<B&&(N|=o[f+1]<<8)):(N=o[f]<<8,f+1<B&&(N|=o[f+1])),N}function P(o,f,g,B){B||(C(typeof g=="boolean","missing or invalid endian"),C(f!=null,"missing offset"),C(f+3<o.length,"Trying to read beyond buffer length"));var N,B=o.length;if(!(B<=f))return g?(f+2<B&&(N=o[f+2]<<16),f+1<B&&(N|=o[f+1]<<8),N|=o[f],f+3<B&&(N+=o[f+3]<<24>>>0)):(f+1<B&&(N=o[f+1]<<16),f+2<B&&(N|=o[f+2]<<8),f+3<B&&(N|=o[f+3]),N+=o[f]<<24>>>0),N}function c(o,f,g,U){if(U||(C(typeof g=="boolean","missing or invalid endian"),C(f!=null,"missing offset"),C(f+1<o.length,"Trying to read beyond buffer length")),!(o.length<=f))return U=I(o,f,g,!0),32768&U?-1*(65535-U+1):U}function v(o,f,g,U){if(U||(C(typeof g=="boolean","missing or invalid endian"),C(f!=null,"missing offset"),C(f+3<o.length,"Trying to read beyond buffer length")),!(o.length<=f))return U=P(o,f,g,!0),2147483648&U?-1*(4294967295-U+1):U}function l(o,f,g,U){return U||(C(typeof g=="boolean","missing or invalid endian"),C(f+3<o.length,"Trying to read beyond buffer length")),T.read(o,f,g,23,4)}function s(o,f,g,U){return U||(C(typeof g=="boolean","missing or invalid endian"),C(f+7<o.length,"Trying to read beyond buffer length")),T.read(o,f,g,52,8)}function a(o,f,g,U,N){if(N||(C(f!=null,"missing value"),C(typeof U=="boolean","missing or invalid endian"),C(g!=null,"missing offset"),C(g+1<o.length,"trying to write beyond buffer length"),fe(f,65535)),N=o.length,!(N<=g))for(var B=0,Y=Math.min(N-g,2);B<Y;B++)o[g+B]=(f&255<<8*(U?B:1-B))>>>8*(U?B:1-B)}function h(o,f,g,U,N){if(N||(C(f!=null,"missing value"),C(typeof U=="boolean","missing or invalid endian"),C(g!=null,"missing offset"),C(g+3<o.length,"trying to write beyond buffer length"),fe(f,4294967295)),N=o.length,!(N<=g))for(var B=0,Y=Math.min(N-g,4);B<Y;B++)o[g+B]=f>>>8*(U?B:3-B)&255}function y(o,f,g,U,N){N||(C(f!=null,"missing value"),C(typeof U=="boolean","missing or invalid endian"),C(g!=null,"missing offset"),C(g+1<o.length,"Trying to write beyond buffer length"),he(f,32767,-32768)),o.length<=g||a(o,0<=f?f:65535+f+1,g,U,N)}function F(o,f,g,U,N){N||(C(f!=null,"missing value"),C(typeof U=="boolean","missing or invalid endian"),C(g!=null,"missing offset"),C(g+3<o.length,"Trying to write beyond buffer length"),he(f,2147483647,-2147483648)),o.length<=g||h(o,0<=f?f:4294967295+f+1,g,U,N)}function z(o,f,g,U,N){N||(C(f!=null,"missing value"),C(typeof U=="boolean","missing or invalid endian"),C(g!=null,"missing offset"),C(g+3<o.length,"Trying to write beyond buffer length"),be(f,34028234663852886e22,-34028234663852886e22)),o.length<=g||T.write(o,f,g,U,23,4)}function L(o,f,g,U,N){N||(C(f!=null,"missing value"),C(typeof U=="boolean","missing or invalid endian"),C(g!=null,"missing offset"),C(g+7<o.length,"Trying to write beyond buffer length"),be(f,17976931348623157e292,-17976931348623157e292)),o.length<=g||T.write(o,f,g,U,52,8)}i.Buffer=m,i.SlowBuffer=m,i.INSPECT_MAX_BYTES=50,m.poolSize=8192,m._useTypedArrays=function(){try{var o=new ArrayBuffer(0),f=new Uint8Array(o);return f.foo=function(){return 42},f.foo()===42&&typeof f.subarray=="function"}catch{return!1}}(),m.isEncoding=function(o){switch(String(o).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},m.isBuffer=function(o){return!(o==null||!o._isBuffer)},m.byteLength=function(o,f){var g;switch(o+="",f||"utf8"){case"hex":g=o.length/2;break;case"utf8":case"utf-8":g=le(o).length;break;case"ascii":case"binary":case"raw":g=o.length;break;case"base64":g=_e(o).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":g=2*o.length;break;default:throw new Error("Unknown encoding")}return g},m.concat=function(o,f){if(C(K(o),`Usage: Buffer.concat(list, [totalLength])
list should be an Array.`),o.length===0)return new m(0);if(o.length===1)return o[0];if(typeof f!="number")for(N=f=0;N<o.length;N++)f+=o[N].length;for(var g=new m(f),U=0,N=0;N<o.length;N++){var B=o[N];B.copy(g,U),U+=B.length}return g},m.prototype.write=function(o,f,g,U){isFinite(f)?isFinite(g)||(U=g,g=void 0):(ae=U,U=f,f=g,g=ae),f=Number(f)||0;var N,B,Y,ee,ae=this.length-f;switch((!g||ae<(g=Number(g)))&&(g=ae),U=String(U||"utf8").toLowerCase()){case"hex":N=function(W,te,ue,ne){ue=Number(ue)||0;var ie=W.length-ue;(!ne||ie<(ne=Number(ne)))&&(ne=ie),C((ie=te.length)%2==0,"Invalid hex string"),ie/2<ne&&(ne=ie/2);for(var xe=0;xe<ne;xe++){var Te=parseInt(te.substr(2*xe,2),16);C(!isNaN(Te),"Invalid hex string"),W[ue+xe]=Te}return m._charsWritten=2*xe,xe}(this,o,f,g);break;case"utf8":case"utf-8":B=this,Y=f,ee=g,N=m._charsWritten=ge(le(o),B,Y,ee);break;case"ascii":case"binary":N=A(this,o,f,g);break;case"base64":B=this,Y=f,ee=g,N=m._charsWritten=ge(_e(o),B,Y,ee);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":N=O(this,o,f,g);break;default:throw new Error("Unknown encoding")}return N},m.prototype.toString=function(o,f,g){var U,N,B,Y,ee=this;if(o=String(o||"utf8").toLowerCase(),f=Number(f)||0,(g=g!==void 0?Number(g):ee.length)===f)return"";switch(o){case"hex":U=function(ae,W,te){var ue=ae.length;(!W||W<0)&&(W=0),(!te||te<0||ue<te)&&(te=ue);for(var ne="",ie=W;ie<te;ie++)ne+=Z(ae[ie]);return ne}(ee,f,g);break;case"utf8":case"utf-8":U=function(ae,W,te){var ue="",ne="";te=Math.min(ae.length,te);for(var ie=W;ie<te;ie++)ae[ie]<=127?(ue+=ce(ne)+String.fromCharCode(ae[ie]),ne=""):ne+="%"+ae[ie].toString(16);return ue+ce(ne)}(ee,f,g);break;case"ascii":case"binary":U=M(ee,f,g);break;case"base64":N=ee,Y=g,U=(B=f)===0&&Y===N.length?b.fromByteArray(N):b.fromByteArray(N.slice(B,Y));break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":U=function(ae,W,te){for(var ue=ae.slice(W,te),ne="",ie=0;ie<ue.length;ie+=2)ne+=String.fromCharCode(ue[ie]+256*ue[ie+1]);return ne}(ee,f,g);break;default:throw new Error("Unknown encoding")}return U},m.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},m.prototype.copy=function(o,f,g,U){if(f=f||0,(U=U||U===0?U:this.length)!==(g=g||0)&&o.length!==0&&this.length!==0){C(g<=U,"sourceEnd < sourceStart"),C(0<=f&&f<o.length,"targetStart out of bounds"),C(0<=g&&g<this.length,"sourceStart out of bounds"),C(0<=U&&U<=this.length,"sourceEnd out of bounds"),U>this.length&&(U=this.length);var N=(U=o.length-f<U-g?o.length-f+g:U)-g;if(N<100||!m._useTypedArrays)for(var B=0;B<N;B++)o[B+f]=this[B+g];else o._set(this.subarray(g,g+N),f)}},m.prototype.slice=function(o,f){var g=this.length;if(o=J(o,g,0),f=J(f,g,g),m._useTypedArrays)return m._augment(this.subarray(o,f));for(var U=f-o,N=new m(U,void 0,!0),B=0;B<U;B++)N[B]=this[B+o];return N},m.prototype.get=function(o){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(o)},m.prototype.set=function(o,f){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(o,f)},m.prototype.readUInt8=function(o,f){if(f||(C(o!=null,"missing offset"),C(o<this.length,"Trying to read beyond buffer length")),!(o>=this.length))return this[o]},m.prototype.readUInt16LE=function(o,f){return I(this,o,!0,f)},m.prototype.readUInt16BE=function(o,f){return I(this,o,!1,f)},m.prototype.readUInt32LE=function(o,f){return P(this,o,!0,f)},m.prototype.readUInt32BE=function(o,f){return P(this,o,!1,f)},m.prototype.readInt8=function(o,f){if(f||(C(o!=null,"missing offset"),C(o<this.length,"Trying to read beyond buffer length")),!(o>=this.length))return 128&this[o]?-1*(255-this[o]+1):this[o]},m.prototype.readInt16LE=function(o,f){return c(this,o,!0,f)},m.prototype.readInt16BE=function(o,f){return c(this,o,!1,f)},m.prototype.readInt32LE=function(o,f){return v(this,o,!0,f)},m.prototype.readInt32BE=function(o,f){return v(this,o,!1,f)},m.prototype.readFloatLE=function(o,f){return l(this,o,!0,f)},m.prototype.readFloatBE=function(o,f){return l(this,o,!1,f)},m.prototype.readDoubleLE=function(o,f){return s(this,o,!0,f)},m.prototype.readDoubleBE=function(o,f){return s(this,o,!1,f)},m.prototype.writeUInt8=function(o,f,g){g||(C(o!=null,"missing value"),C(f!=null,"missing offset"),C(f<this.length,"trying to write beyond buffer length"),fe(o,255)),f>=this.length||(this[f]=o)},m.prototype.writeUInt16LE=function(o,f,g){a(this,o,f,!0,g)},m.prototype.writeUInt16BE=function(o,f,g){a(this,o,f,!1,g)},m.prototype.writeUInt32LE=function(o,f,g){h(this,o,f,!0,g)},m.prototype.writeUInt32BE=function(o,f,g){h(this,o,f,!1,g)},m.prototype.writeInt8=function(o,f,g){g||(C(o!=null,"missing value"),C(f!=null,"missing offset"),C(f<this.length,"Trying to write beyond buffer length"),he(o,127,-128)),f>=this.length||(0<=o?this.writeUInt8(o,f,g):this.writeUInt8(255+o+1,f,g))},m.prototype.writeInt16LE=function(o,f,g){y(this,o,f,!0,g)},m.prototype.writeInt16BE=function(o,f,g){y(this,o,f,!1,g)},m.prototype.writeInt32LE=function(o,f,g){F(this,o,f,!0,g)},m.prototype.writeInt32BE=function(o,f,g){F(this,o,f,!1,g)},m.prototype.writeFloatLE=function(o,f,g){z(this,o,f,!0,g)},m.prototype.writeFloatBE=function(o,f,g){z(this,o,f,!1,g)},m.prototype.writeDoubleLE=function(o,f,g){L(this,o,f,!0,g)},m.prototype.writeDoubleBE=function(o,f,g){L(this,o,f,!1,g)},m.prototype.fill=function(o,f,g){if(f=f||0,g=g||this.length,C(typeof(o=typeof(o=o||0)=="string"?o.charCodeAt(0):o)=="number"&&!isNaN(o),"value is not a number"),C(f<=g,"end < start"),g!==f&&this.length!==0){C(0<=f&&f<this.length,"start out of bounds"),C(0<=g&&g<=this.length,"end out of bounds");for(var U=f;U<g;U++)this[U]=o}},m.prototype.inspect=function(){for(var o=[],f=this.length,g=0;g<f;g++)if(o[g]=Z(this[g]),g===i.INSPECT_MAX_BYTES){o[g+1]="...";break}return"<Buffer "+o.join(" ")+">"},m.prototype.toArrayBuffer=function(){if(typeof Uint8Array>"u")throw new Error("Buffer.toArrayBuffer not supported in this browser");if(m._useTypedArrays)return new m(this).buffer;for(var o=new Uint8Array(this.length),f=0,g=o.length;f<g;f+=1)o[f]=this[f];return o.buffer};var k=m.prototype;function J(o,f,g){return typeof o!="number"?g:f<=(o=~~o)?f:0<=o||0<=(o+=f)?o:0}function Q(o){return(o=~~Math.ceil(+o))<0?0:o}function K(o){return(Array.isArray||function(f){return Object.prototype.toString.call(f)==="[object Array]"})(o)}function Z(o){return o<16?"0"+o.toString(16):o.toString(16)}function le(o){for(var f=[],g=0;g<o.length;g++){var U=o.charCodeAt(g);if(U<=127)f.push(o.charCodeAt(g));else for(var N=g,B=(55296<=U&&U<=57343&&g++,encodeURIComponent(o.slice(N,g+1)).substr(1).split("%")),Y=0;Y<B.length;Y++)f.push(parseInt(B[Y],16))}return f}function _e(o){return b.toByteArray(o)}function ge(o,f,g,U){for(var N=0;N<U&&!(N+g>=f.length||N>=o.length);N++)f[N+g]=o[N];return N}function ce(o){try{return decodeURIComponent(o)}catch{return"�"}}function fe(o,f){C(typeof o=="number","cannot write a non-number as a number"),C(0<=o,"specified a negative value for writing an unsigned value"),C(o<=f,"value is larger than maximum value for type"),C(Math.floor(o)===o,"value has a fractional component")}function he(o,f,g){C(typeof o=="number","cannot write a non-number as a number"),C(o<=f,"value larger than maximum allowed value"),C(g<=o,"value smaller than minimum allowed value"),C(Math.floor(o)===o,"value has a fractional component")}function be(o,f,g){C(typeof o=="number","cannot write a non-number as a number"),C(o<=f,"value larger than maximum allowed value"),C(g<=o,"value smaller than minimum allowed value")}function C(o,f){if(!o)throw new Error(f||"Failed assertion")}m._augment=function(o){return o._isBuffer=!0,o._get=o.get,o._set=o.set,o.get=k.get,o.set=k.set,o.write=k.write,o.toString=k.toString,o.toLocaleString=k.toString,o.toJSON=k.toJSON,o.copy=k.copy,o.slice=k.slice,o.readUInt8=k.readUInt8,o.readUInt16LE=k.readUInt16LE,o.readUInt16BE=k.readUInt16BE,o.readUInt32LE=k.readUInt32LE,o.readUInt32BE=k.readUInt32BE,o.readInt8=k.readInt8,o.readInt16LE=k.readInt16LE,o.readInt16BE=k.readInt16BE,o.readInt32LE=k.readInt32LE,o.readInt32BE=k.readInt32BE,o.readFloatLE=k.readFloatLE,o.readFloatBE=k.readFloatBE,o.readDoubleLE=k.readDoubleLE,o.readDoubleBE=k.readDoubleBE,o.writeUInt8=k.writeUInt8,o.writeUInt16LE=k.writeUInt16LE,o.writeUInt16BE=k.writeUInt16BE,o.writeUInt32LE=k.writeUInt32LE,o.writeUInt32BE=k.writeUInt32BE,o.writeInt8=k.writeInt8,o.writeInt16LE=k.writeInt16LE,o.writeInt16BE=k.writeInt16BE,o.writeInt32LE=k.writeInt32LE,o.writeInt32BE=k.writeInt32BE,o.writeFloatLE=k.writeFloatLE,o.writeFloatBE=k.writeFloatBE,o.writeDoubleLE=k.writeDoubleLE,o.writeDoubleBE=k.writeDoubleBE,o.fill=k.fill,o.inspect=k.inspect,o.toArrayBuffer=k.toArrayBuffer,o}}).call(this,n("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},n("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/buffer/index.js","/node_modules/gulp-browserify/node_modules/buffer")},{"base64-js":2,buffer:3,ieee754:10,lYpoI2:11}],4:[function(n,t,i){(function(u,d,b,w,_,E,D,S,R){var b=n("buffer").Buffer,T=4,m=new b(T);m.fill(0),t.exports={hash:function(A,O,M,I){for(var P=O(function(a,h){a.length%T!=0&&(y=a.length+(T-a.length%T),a=b.concat([a,m],y));for(var y,F=[],z=h?a.readInt32BE:a.readInt32LE,L=0;L<a.length;L+=T)F.push(z.call(a,L));return F}(A=b.isBuffer(A)?A:new b(A),I),8*A.length),O=I,c=new b(M),v=O?c.writeInt32BE:c.writeInt32LE,l=0;l<P.length;l++)v.call(c,P[l],4*l,!0);return c}}}).call(this,n("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},n("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/helpers.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],5:[function(n,t,i){(function(u,d,b,w,_,E,D,S,R){var b=n("buffer").Buffer,T=n("./sha"),m=n("./sha256"),A=n("./rng"),O={sha1:T,sha256:m,md5:n("./md5")},M=64,I=new b(M);function P(a,h){var y=O[a=a||"sha1"],F=[];return y||c("algorithm:",a,"is not yet supported"),{update:function(z){return b.isBuffer(z)||(z=new b(z)),F.push(z),z.length,this},digest:function(z){var L=b.concat(F),L=h?function(k,J,Q){b.isBuffer(J)||(J=new b(J)),b.isBuffer(Q)||(Q=new b(Q)),J.length>M?J=k(J):J.length<M&&(J=b.concat([J,I],M));for(var K=new b(M),Z=new b(M),le=0;le<M;le++)K[le]=54^J[le],Z[le]=92^J[le];return Q=k(b.concat([K,Q])),k(b.concat([Z,Q]))}(y,h,L):y(L);return F=null,z?L.toString(z):L}}}function c(){var a=[].slice.call(arguments).join(" ");throw new Error([a,"we accept pull requests","http://github.com/dominictarr/crypto-browserify"].join(`
`))}I.fill(0),i.createHash=function(a){return P(a)},i.createHmac=P,i.randomBytes=function(a,h){if(!h||!h.call)return new b(A(a));try{h.call(this,void 0,new b(A(a)))}catch(y){h(y)}};var v,l=["createCredentials","createCipher","createCipheriv","createDecipher","createDecipheriv","createSign","createVerify","createDiffieHellman","pbkdf2"],s=function(a){i[a]=function(){c("sorry,",a,"is not implemented yet")}};for(v in l)s(l[v])}).call(this,n("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},n("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/index.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./md5":6,"./rng":7,"./sha":8,"./sha256":9,buffer:3,lYpoI2:11}],6:[function(n,t,i){(function(u,d,p,w,_,E,D,S,R){var b=n("./helpers");function T(c,v){c[v>>5]|=128<<v%32,c[14+(v+64>>>9<<4)]=v;for(var l=1732584193,s=-271733879,a=-1732584194,h=271733878,y=0;y<c.length;y+=16){var F=l,z=s,L=a,k=h,l=A(l,s,a,h,c[y+0],7,-680876936),h=A(h,l,s,a,c[y+1],12,-389564586),a=A(a,h,l,s,c[y+2],17,606105819),s=A(s,a,h,l,c[y+3],22,-1044525330);l=A(l,s,a,h,c[y+4],7,-176418897),h=A(h,l,s,a,c[y+5],12,1200080426),a=A(a,h,l,s,c[y+6],17,-1473231341),s=A(s,a,h,l,c[y+7],22,-45705983),l=A(l,s,a,h,c[y+8],7,1770035416),h=A(h,l,s,a,c[y+9],12,-1958414417),a=A(a,h,l,s,c[y+10],17,-42063),s=A(s,a,h,l,c[y+11],22,-1990404162),l=A(l,s,a,h,c[y+12],7,1804603682),h=A(h,l,s,a,c[y+13],12,-40341101),a=A(a,h,l,s,c[y+14],17,-1502002290),l=O(l,s=A(s,a,h,l,c[y+15],22,1236535329),a,h,c[y+1],5,-165796510),h=O(h,l,s,a,c[y+6],9,-1069501632),a=O(a,h,l,s,c[y+11],14,643717713),s=O(s,a,h,l,c[y+0],20,-373897302),l=O(l,s,a,h,c[y+5],5,-701558691),h=O(h,l,s,a,c[y+10],9,38016083),a=O(a,h,l,s,c[y+15],14,-660478335),s=O(s,a,h,l,c[y+4],20,-405537848),l=O(l,s,a,h,c[y+9],5,568446438),h=O(h,l,s,a,c[y+14],9,-1019803690),a=O(a,h,l,s,c[y+3],14,-187363961),s=O(s,a,h,l,c[y+8],20,1163531501),l=O(l,s,a,h,c[y+13],5,-1444681467),h=O(h,l,s,a,c[y+2],9,-51403784),a=O(a,h,l,s,c[y+7],14,1735328473),l=M(l,s=O(s,a,h,l,c[y+12],20,-1926607734),a,h,c[y+5],4,-378558),h=M(h,l,s,a,c[y+8],11,-2022574463),a=M(a,h,l,s,c[y+11],16,1839030562),s=M(s,a,h,l,c[y+14],23,-35309556),l=M(l,s,a,h,c[y+1],4,-1530992060),h=M(h,l,s,a,c[y+4],11,1272893353),a=M(a,h,l,s,c[y+7],16,-155497632),s=M(s,a,h,l,c[y+10],23,-1094730640),l=M(l,s,a,h,c[y+13],4,681279174),h=M(h,l,s,a,c[y+0],11,-358537222),a=M(a,h,l,s,c[y+3],16,-722521979),s=M(s,a,h,l,c[y+6],23,76029189),l=M(l,s,a,h,c[y+9],4,-640364487),h=M(h,l,s,a,c[y+12],11,-421815835),a=M(a,h,l,s,c[y+15],16,530742520),l=I(l,s=M(s,a,h,l,c[y+2],23,-995338651),a,h,c[y+0],6,-198630844),h=I(h,l,s,a,c[y+7],10,1126891415),a=I(a,h,l,s,c[y+14],15,-1416354905),s=I(s,a,h,l,c[y+5],21,-57434055),l=I(l,s,a,h,c[y+12],6,1700485571),h=I(h,l,s,a,c[y+3],10,-1894986606),a=I(a,h,l,s,c[y+10],15,-1051523),s=I(s,a,h,l,c[y+1],21,-2054922799),l=I(l,s,a,h,c[y+8],6,1873313359),h=I(h,l,s,a,c[y+15],10,-30611744),a=I(a,h,l,s,c[y+6],15,-1560198380),s=I(s,a,h,l,c[y+13],21,1309151649),l=I(l,s,a,h,c[y+4],6,-145523070),h=I(h,l,s,a,c[y+11],10,-1120210379),a=I(a,h,l,s,c[y+2],15,718787259),s=I(s,a,h,l,c[y+9],21,-343485551),l=P(l,F),s=P(s,z),a=P(a,L),h=P(h,k)}return Array(l,s,a,h)}function m(c,v,l,s,a,h){return P((v=P(P(v,c),P(s,h)))<<a|v>>>32-a,l)}function A(c,v,l,s,a,h,y){return m(v&l|~v&s,c,v,a,h,y)}function O(c,v,l,s,a,h,y){return m(v&s|l&~s,c,v,a,h,y)}function M(c,v,l,s,a,h,y){return m(v^l^s,c,v,a,h,y)}function I(c,v,l,s,a,h,y){return m(l^(v|~s),c,v,a,h,y)}function P(c,v){var l=(65535&c)+(65535&v);return(c>>16)+(v>>16)+(l>>16)<<16|65535&l}t.exports=function(c){return b.hash(c,T,16)}}).call(this,n("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},n("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/md5.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],7:[function(n,t,i){(function(u,d,p,w,_,E,D,S,R){t.exports=function(b){for(var T,m=new Array(b),A=0;A<b;A++)!(3&A)&&(T=4294967296*Math.random()),m[A]=T>>>((3&A)<<3)&255;return m}}).call(this,n("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},n("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/rng.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],8:[function(n,t,i){(function(u,d,p,w,_,E,D,S,R){var b=n("./helpers");function T(O,M){O[M>>5]|=128<<24-M%32,O[15+(M+64>>9<<4)]=M;for(var I,P,c,v=Array(80),l=1732584193,s=-271733879,a=-1732584194,h=271733878,y=-1009589776,F=0;F<O.length;F+=16){for(var z=l,L=s,k=a,J=h,Q=y,K=0;K<80;K++){v[K]=K<16?O[F+K]:A(v[K-3]^v[K-8]^v[K-14]^v[K-16],1);var Z=m(m(A(l,5),(Z=s,P=a,c=h,(I=K)<20?Z&P|~Z&c:!(I<40)&&I<60?Z&P|Z&c|P&c:Z^P^c)),m(m(y,v[K]),(I=K)<20?1518500249:I<40?1859775393:I<60?-1894007588:-899497514)),y=h,h=a,a=A(s,30),s=l,l=Z}l=m(l,z),s=m(s,L),a=m(a,k),h=m(h,J),y=m(y,Q)}return Array(l,s,a,h,y)}function m(O,M){var I=(65535&O)+(65535&M);return(O>>16)+(M>>16)+(I>>16)<<16|65535&I}function A(O,M){return O<<M|O>>>32-M}t.exports=function(O){return b.hash(O,T,20,!0)}}).call(this,n("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},n("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],9:[function(n,t,i){(function(u,d,p,w,_,E,D,S,R){function b(M,I){var P=(65535&M)+(65535&I);return(M>>16)+(I>>16)+(P>>16)<<16|65535&P}function T(M,I){var P,c=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),v=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),l=new Array(64);M[I>>5]|=128<<24-I%32,M[15+(I+64>>9<<4)]=I;for(var s,a,h=0;h<M.length;h+=16){for(var y=v[0],F=v[1],z=v[2],L=v[3],k=v[4],J=v[5],Q=v[6],K=v[7],Z=0;Z<64;Z++)l[Z]=Z<16?M[Z+h]:b(b(b((a=l[Z-2],A(a,17)^A(a,19)^O(a,10)),l[Z-7]),(a=l[Z-15],A(a,7)^A(a,18)^O(a,3))),l[Z-16]),P=b(b(b(b(K,A(a=k,6)^A(a,11)^A(a,25)),k&J^~k&Q),c[Z]),l[Z]),s=b(A(s=y,2)^A(s,13)^A(s,22),y&F^y&z^F&z),K=Q,Q=J,J=k,k=b(L,P),L=z,z=F,F=y,y=b(P,s);v[0]=b(y,v[0]),v[1]=b(F,v[1]),v[2]=b(z,v[2]),v[3]=b(L,v[3]),v[4]=b(k,v[4]),v[5]=b(J,v[5]),v[6]=b(Q,v[6]),v[7]=b(K,v[7])}return v}var m=n("./helpers"),A=function(M,I){return M>>>I|M<<32-I},O=function(M,I){return M>>>I};t.exports=function(M){return m.hash(M,T,32,!0)}}).call(this,n("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},n("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha256.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],10:[function(n,t,i){(function(u,d,p,w,_,E,D,S,R){i.read=function(b,T,m,A,h){var M,I,P=8*h-A-1,c=(1<<P)-1,v=c>>1,l=-7,s=m?h-1:0,a=m?-1:1,h=b[T+s];for(s+=a,M=h&(1<<-l)-1,h>>=-l,l+=P;0<l;M=256*M+b[T+s],s+=a,l-=8);for(I=M&(1<<-l)-1,M>>=-l,l+=A;0<l;I=256*I+b[T+s],s+=a,l-=8);if(M===0)M=1-v;else{if(M===c)return I?NaN:1/0*(h?-1:1);I+=Math.pow(2,A),M-=v}return(h?-1:1)*I*Math.pow(2,M-A)},i.write=function(b,T,m,A,O,y){var I,P,c=8*y-O-1,v=(1<<c)-1,l=v>>1,s=O===23?Math.pow(2,-24)-Math.pow(2,-77):0,a=A?0:y-1,h=A?1:-1,y=T<0||T===0&&1/T<0?1:0;for(T=Math.abs(T),isNaN(T)||T===1/0?(P=isNaN(T)?1:0,I=v):(I=Math.floor(Math.log(T)/Math.LN2),T*(A=Math.pow(2,-I))<1&&(I--,A*=2),2<=(T+=1<=I+l?s/A:s*Math.pow(2,1-l))*A&&(I++,A/=2),v<=I+l?(P=0,I=v):1<=I+l?(P=(T*A-1)*Math.pow(2,O),I+=l):(P=T*Math.pow(2,l-1)*Math.pow(2,O),I=0));8<=O;b[m+a]=255&P,a+=h,P/=256,O-=8);for(I=I<<O|P,c+=O;0<c;b[m+a]=255&I,a+=h,I/=256,c-=8);b[m+a-h]|=128*y}}).call(this,n("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},n("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/ieee754/index.js","/node_modules/gulp-browserify/node_modules/ieee754")},{buffer:3,lYpoI2:11}],11:[function(n,t,i){(function(u,d,p,w,_,E,D,S,R){var b,T,m;function A(){}(u=t.exports={}).nextTick=(T=typeof window<"u"&&window.setImmediate,m=typeof window<"u"&&window.postMessage&&window.addEventListener,T?function(O){return window.setImmediate(O)}:m?(b=[],window.addEventListener("message",function(O){var M=O.source;M!==window&&M!==null||O.data!=="process-tick"||(O.stopPropagation(),0<b.length&&b.shift()())},!0),function(O){b.push(O),window.postMessage("process-tick","*")}):function(O){setTimeout(O,0)}),u.title="browser",u.browser=!0,u.env={},u.argv=[],u.on=A,u.addListener=A,u.once=A,u.off=A,u.removeListener=A,u.removeAllListeners=A,u.emit=A,u.binding=function(O){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(O){throw new Error("process.chdir is not supported")}}).call(this,n("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},n("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/process/browser.js","/node_modules/gulp-browserify/node_modules/process")},{buffer:3,lYpoI2:11}]},{},[1])(1)})}(pn)),pn.exports}Qa();var dn,mn;function Jn(){return mn||(mn=1,dn=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]),dn}var gn,vn;function eo(){return vn||(vn=1,gn=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]),gn}var yn,bn;function Qn(){return bn||(bn=1,yn=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]),yn}var Dt,xn;function to(){if(xn)return Dt;xn=1;var r=Jn();return Dt=r.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"]),Dt}var Ot,wn;function no(){if(wn)return Ot;wn=1;var r=Qn();return r=r.slice().filter(function(e){return!/^(gl\_|texture)/.test(e)}),Ot=r.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"]),Ot}var Pt,Mn;function ro(){if(Mn)return Pt;Mn=1,Pt=I;var r=Jn(),e=eo(),n=Qn(),t=to(),i=no(),u=999,d=9999,p=0,w=1,_=2,E=3,D=4,S=5,R=6,b=7,T=8,m=9,A=10,O=11,M=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"];function I(P){var c=0,v=0,l=u,s,a,h=[],y=[],F=1,z=0,L=0,k=!1,J=!1,Q="",K;P=P||{};var Z=n,le=r;P.version==="300 es"&&(Z=i,le=t);for(var _e={},ge={},c=0;c<Z.length;c++)_e[Z[c]]=!0;for(var c=0;c<le.length;c++)ge[le[c]]=!0;return function(W){return y=[],W!==null?fe(W):he()};function ce(W){W.length&&y.push({type:M[l],data:W,position:L,line:F,column:z})}function fe(W){c=0,W.toString&&(W=W.toString()),Q+=W.replace(/\r\n/g,`
`),K=Q.length;for(var te;s=Q[c],c<K;){switch(te=c,l){case p:c=g();break;case w:c=f();break;case _:c=o();break;case E:c=U();break;case D:c=Y();break;case O:c=B();break;case S:c=ee();break;case d:c=ae();break;case m:c=C();break;case u:c=be();break}if(te!==c)switch(Q[te]){case`
`:z=0,++F;break;default:++z;break}}return v+=c,Q=Q.slice(c),y}function he(W){return h.length&&ce(h.join("")),l=A,ce("(eof)"),y}function be(){return h=h.length?[]:h,a==="/"&&s==="*"?(L=v+c-1,l=p,a=s,c+1):a==="/"&&s==="/"?(L=v+c-1,l=w,a=s,c+1):s==="#"?(l=_,L=v+c,c):/\s/.test(s)?(l=m,L=v+c,c):(k=/\d/.test(s),J=/[^\w_]/.test(s),L=v+c,l=k?D:J?E:d,c)}function C(){return/[^\s]/g.test(s)?(ce(h.join("")),l=u,c):(h.push(s),a=s,c+1)}function o(){return(s==="\r"||s===`
`)&&a!=="\\"?(ce(h.join("")),l=u,c):(h.push(s),a=s,c+1)}function f(){return o()}function g(){return s==="/"&&a==="*"?(h.push(s),ce(h.join("")),l=u,c+1):(h.push(s),a=s,c+1)}function U(){if(a==="."&&/\d/.test(s))return l=S,c;if(a==="/"&&s==="*")return l=p,c;if(a==="/"&&s==="/")return l=w,c;if(s==="."&&h.length){for(;N(h););return l=S,c}if(s===";"||s===")"||s==="("){if(h.length)for(;N(h););return ce(s),l=u,c+1}var W=h.length===2&&s!=="=";if(/[\w_\d\s]/.test(s)||W){for(;N(h););return l=u,c}return h.push(s),a=s,c+1}function N(W){var te=0,ue,ne;do{if(ue=e.indexOf(W.slice(0,W.length+te).join("")),ne=e[ue],ue===-1){if(te--+W.length>0)continue;ne=W.slice(0,1).join("")}return ce(ne),L+=ne.length,h=h.slice(ne.length),h.length}while(!0)}function B(){return/[^a-fA-F0-9]/.test(s)?(ce(h.join("")),l=u,c):(h.push(s),a=s,c+1)}function Y(){return s==="."||/[eE]/.test(s)?(h.push(s),l=S,a=s,c+1):s==="x"&&h.length===1&&h[0]==="0"?(l=O,h.push(s),a=s,c+1):/[^\d]/.test(s)?(ce(h.join("")),l=u,c):(h.push(s),a=s,c+1)}function ee(){return s==="f"&&(h.push(s),a=s,c+=1),/[eE]/.test(s)||(s==="-"||s==="+")&&/[eE]/.test(a)?(h.push(s),a=s,c+1):/[^\d]/.test(s)?(ce(h.join("")),l=u,c):(h.push(s),a=s,c+1)}function ae(){if(/[^\d\w_]/.test(s)){var W=h.join("");return ge[W]?l=T:_e[W]?l=b:l=R,ce(h.join("")),l=u,c}return h.push(s),a=s,c+1}}return Pt}var St,_n;function ao(){if(_n)return St;_n=1;var r=ro();St=e;function e(n,t){var i=r(t),u=[];return u=u.concat(i(n)),u=u.concat(i(null)),u}return St}ao();function oo(r,e){if(typeof r!="object"||r===null)return r;var n=r[Symbol.toPrimitive];if(n!==void 0){var t=n.call(r,e);if(typeof t!="object")return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}function io(r){var e=oo(r,"string");return typeof e=="symbol"?e:String(e)}function oe(r,e,n){return e=io(e),e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}var H={position:"csm_Position",positionRaw:"csm_PositionRaw",pointSize:"csm_PointSize",fragColor:"csm_FragColor",diffuseColor:"csm_DiffuseColor",normal:"csm_Normal",roughness:"csm_Roughness",metalness:"csm_Metalness",emissive:"csm_Emissive",ao:"csm_AO",bump:"csm_Bump",depthAlpha:"csm_DepthAlpha"},de,ze;de={},oe(de,"".concat(H.normal),{"#include <beginnormal_vertex>":`
    vec3 objectNormal = `.concat(H.normal,`;
    #ifdef USE_TANGENT
	    vec3 objectTangent = vec3( tangent.xyz );
    #endif
    `)}),oe(de,"".concat(H.position),{"#include <begin_vertex>":`
    vec3 transformed = `.concat(H.position,`;
  `)}),oe(de,"".concat(H.positionRaw),{"#include <begin_vertex>":`
    vec4 csm_internal_positionUnprojected = `.concat(H.positionRaw,`;
    mat4x4 csm_internal_unprojectMatrix = projectionMatrix * modelViewMatrix;
    #ifdef USE_INSTANCING
      csm_internal_unprojectMatrix = csm_internal_unprojectMatrix * instanceMatrix;
    #endif
    csm_internal_positionUnprojected = inverse(csm_internal_unprojectMatrix) * csm_internal_positionUnprojected;
    vec3 transformed = csm_internal_positionUnprojected.xyz;
  `)}),oe(de,"".concat(H.pointSize),{"gl_PointSize = size;":`
    gl_PointSize = `.concat(H.pointSize,`;
    `)}),oe(de,"".concat(H.diffuseColor),{"#include <color_fragment>":`
    #include <color_fragment>
    diffuseColor = `.concat(H.diffuseColor,`;
  `)}),oe(de,"".concat(H.fragColor),{"#include <dithering_fragment>":`
    #include <dithering_fragment>
    gl_FragColor  = `.concat(H.fragColor,`;
  `)}),oe(de,"".concat(H.emissive),{"vec3 totalEmissiveRadiance = emissive;":`
    vec3 totalEmissiveRadiance = `.concat(H.emissive,`;
    `)}),oe(de,"".concat(H.roughness),{"#include <roughnessmap_fragment>":`
    #include <roughnessmap_fragment>
    roughnessFactor = `.concat(H.roughness,`;
    `)}),oe(de,"".concat(H.metalness),{"#include <metalnessmap_fragment>":`
    #include <metalnessmap_fragment>
    metalnessFactor = `.concat(H.metalness,`;
    `)}),oe(de,"".concat(H.ao),{"#include <aomap_fragment>":`
    #include <aomap_fragment>
    reflectedLight.indirectDiffuse *= 1. - `.concat(H.ao,`;
    `)}),oe(de,"".concat(H.bump),{"#include <normal_fragment_maps>":`
    #include <normal_fragment_maps>

    vec3 csm_internal_orthogonal = `.concat(H.bump," - (dot(").concat(H.bump,`, normal) * normal);
    vec3 csm_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_internal_orthogonal;
    normal = normalize(normal - csm_internal_projectedbump);
    `)}),oe(de,"".concat(H.depthAlpha),{"gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );":`
      gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity * `.concat(H.depthAlpha,` );
    `),"gl_FragColor = packDepthToRGBA( fragCoordZ );":`
      gl_FragColor = packDepthToRGBA( fragCoordZ );
      gl_FragColor.a *= `.concat(H.depthAlpha,`;
    `)});ze={},oe(ze,"".concat(H.position),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":`
    gl_Position = projectionMatrix * modelViewMatrix * vec4( `.concat(H.position,`, 1.0 );
  `)}),oe(ze,"".concat(H.positionRaw),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":`
    gl_Position = `.concat(H.position,`;
  `)}),oe(ze,"".concat(H.diffuseColor),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":`
    gl_FragColor = `.concat(H.diffuseColor,`;
  `)}),oe(ze,"".concat(H.fragColor),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":`
    gl_FragColor = `.concat(H.fragColor,`;
  `)});var me;me={},oe(me,"".concat(H.position),"*"),oe(me,"".concat(H.positionRaw),"*"),oe(me,"".concat(H.normal),"*"),oe(me,"".concat(H.pointSize),["PointsMaterial"]),oe(me,"".concat(H.diffuseColor),"*"),oe(me,"".concat(H.fragColor),"*"),oe(me,"".concat(H.emissive),["MeshStandardMaterial","MeshPhysicalMaterial"]),oe(me,"".concat(H.roughness),["MeshStandardMaterial","MeshPhysicalMaterial"]),oe(me,"".concat(H.metalness),["MeshStandardMaterial","MeshPhysicalMaterial"]),oe(me,"".concat(H.ao),["MeshStandardMaterial","MeshPhysicalMaterial","MeshBasicMaterial","MeshLambertMaterial","MeshPhongMaterial","MeshToonMaterial"]),oe(me,"".concat(H.bump),["MeshLambertMaterial","MeshMatcapMaterial","MeshNormalMaterial","MeshPhongMaterial","MeshPhysicalMaterial","MeshStandardMaterial","MeshToonMaterial","ShadowMaterial"]),oe(me,"".concat(H.depthAlpha),"*");var so=`void main() {
  gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
}`,lo=`#include <common>

void main() {
  vec2 center = vec2(0., 1.);
  float rotation = 0.0;

  
  
  float size = 0.03;

  vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
  vec2 scale;
  scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
  scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

  bool isPerspective = isPerspectiveMatrix( projectionMatrix );
  if ( isPerspective ) scale *= - mvPosition.z;

  vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
  vec2 rotatedPosition;
  rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
  rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
  mvPosition.xy += rotatedPosition;

  gl_Position = projectionMatrix * mvPosition;
}`;const nt=new q(0,0,0),qt=new q(0,0,0),uo=new q(0,0,0);function Tn(r,e,n){const t=nt.setFromMatrixPosition(r.matrixWorld);t.project(e);const i=n.width/2,u=n.height/2;return[(Number.isNaN(t.x)?0:t.x)*i+i,-(t.y*u)+u,t.z]}function co(r,e){const n=nt.setFromMatrixPosition(r.matrixWorld),t=qt.setFromMatrixPosition(e.matrixWorld),i=n.sub(t),u=e.getWorldDirection(uo);return i.angleTo(u)>Math.PI/2}function fo(r,e,n,t){const i=nt.setFromMatrixPosition(r.matrixWorld),u=i.clone();u.project(e),n.setFromCamera(new pe(u.x,u.y),e);const d=n.intersectObjects(t,!0);if(d.length>0){const p=d[0].distance;return i.distanceTo(n.ray.origin)<p}return!0}function po(r,e){if(e instanceof Xe)return e.zoom;if(e instanceof Ce){const n=nt.setFromMatrixPosition(r.matrixWorld),t=qt.setFromMatrixPosition(e.matrixWorld),i=e.fov*Math.PI/180,u=n.distanceTo(t);return 1/(2*Math.tan(i/2)*u)}else return 1}function ho(r,e,n){if(e instanceof Ce||e instanceof Xe){const t=nt.setFromMatrixPosition(r.matrixWorld),i=qt.setFromMatrixPosition(e.matrixWorld),u=t.distanceTo(i),d=(n[1]-n[0])/(e.far-e.near),p=n[1]-d*e.far;return Math.round(d*u+p)}}const jt=r=>Math.abs(r)<1e-10?0:r;function er(r,e,n=""){let t="matrix3d(";for(let i=0;i!==16;i++)t+=jt(e[i]*r.elements[i])+(i!==15?",":")");return n+t}const mo=(r=>e=>er(e,r))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),go=(r=>(e,n)=>er(e,r(n),"translate(-50%,-50%)"))(r=>[1/r,1/r,1/r,1,-1/r,-1/r,-1/r,-1,1/r,1/r,1/r,1,1,1,1,1]),vo=["geometry","material"];new Dn;var zt={exports:{}},yo=zt.exports,En;function bo(){return En||(En=1,function(r,e){(function(n,t){r.exports=t()})(yo,function(){var n=function(){function t(R){return d.appendChild(R.dom),R}function i(R){for(var b=0;b<d.children.length;b++)d.children[b].style.display=b===R?"block":"none";u=R}var u=0,d=document.createElement("div");d.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",d.addEventListener("click",function(R){R.preventDefault(),i(++u%d.children.length)},!1);var p=(performance||Date).now(),w=p,_=0,E=t(new n.Panel("FPS","#0ff","#002")),D=t(new n.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var S=t(new n.Panel("MB","#f08","#201"));return i(0),{REVISION:16,dom:d,addPanel:t,showPanel:i,begin:function(){p=(performance||Date).now()},end:function(){_++;var R=(performance||Date).now();if(D.update(R-p,200),R>w+1e3&&(E.update(1e3*_/(R-w),100),w=R,_=0,S)){var b=performance.memory;S.update(b.usedJSHeapSize/1048576,b.jsHeapSizeLimit/1048576)}return R},update:function(){p=this.end()},domElement:d,setMode:i}};return n.Panel=function(t,i,u){var d=1/0,p=0,w=Math.round,_=w(window.devicePixelRatio||1),E=80*_,D=48*_,S=3*_,R=2*_,b=3*_,T=15*_,m=74*_,A=30*_,O=document.createElement("canvas");O.width=E,O.height=D,O.style.cssText="width:80px;height:48px";var M=O.getContext("2d");return M.font="bold "+9*_+"px Helvetica,Arial,sans-serif",M.textBaseline="top",M.fillStyle=u,M.fillRect(0,0,E,D),M.fillStyle=i,M.fillText(t,S,R),M.fillRect(b,T,m,A),M.fillStyle=u,M.globalAlpha=.9,M.fillRect(b,T,m,A),{dom:O,update:function(I,P){d=Math.min(d,I),p=Math.max(p,I),M.fillStyle=u,M.globalAlpha=1,M.fillRect(0,0,E,T),M.fillStyle=i,M.fillText(w(I)+" "+t+" ("+w(d)+"-"+w(p)+")",S,R),M.drawImage(O,b+_,T,m-_,A,b,T,m-_,A),M.fillRect(b+m-_,T,_,A),M.fillStyle=u,M.globalAlpha=.9,M.fillRect(b+m-_,T,_,w((1-I/P)*A))}}},n})}(zt)),zt.exports}bo();const xo={key:0,args:[0,1,64]},wo={key:1,args:[.5,1,64]},Mo={key:2},_o=["tone-mapped","map","side","color"];new Oe(16777215);const To=["matcap"],Eo={__name:"text",async setup(r){let e,n;const t=([e,n]=Cn(()=>rr(["https://raw.githubusercontent.com/Tresjs/assets/main/textures/matcaps/7.png"])),e=await e,n(),e);return(i,u)=>(we(),Bn($(Xa),{position:[-1,0,0],ref:"textRef",font:"https://raw.githubusercontent.com/Tresjs/assets/main/fonts/FiraCodeRegular.json"},{default:Fr(()=>[u[0]||(u[0]=Lr(" Three js text loader ")),Gt("TresMeshMatcapMaterial",{matcap:$(t)},null,8,To)]),_:1,__:[0]},512))}},Do=Object.freeze(Object.defineProperty({__proto__:null,default:Eo},Symbol.toStringTag,{value:"Module"}));export{Eo as _,No as a,Do as t};
